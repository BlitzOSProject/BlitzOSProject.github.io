<html xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns:m="http://schemas.microsoft.com/office/2004/12/omml"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta name=Title content="Project 4">
<meta name=Keywords content="">
<meta http-equiv=Content-Type content="text/html; charset=macintosh">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 2008">
<meta name=Originator content="Microsoft Word 2008">
<link rel=File-List href="proj4_files/filelist.xml">
<title>Project 4</title>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>Harry H. Porter III</o:Author>
  <o:Template>Normal.dotm</o:Template>
  <o:LastAuthor>Harry</o:LastAuthor>
  <o:Revision>2</o:Revision>
  <o:TotalTime>2777</o:TotalTime>
  <o:LastPrinted>2009-03-26T01:17:00Z</o:LastPrinted>
  <o:Created>2009-03-26T01:17:00Z</o:Created>
  <o:LastSaved>2009-03-26T01:17:00Z</o:LastSaved>
  <o:Pages>2</o:Pages>
  <o:Words>6282</o:Words>
  <o:Characters>32041</o:Characters>
  <o:Lines>1232</o:Lines>
  <o:Paragraphs>604</o:Paragraphs>
  <o:CharactersWithSpaces>43977</o:CharactersWithSpaces>
  <o:Version>12.0</o:Version>
 </o:DocumentProperties>
 <o:OfficeDocumentSettings>
  <o:AllowPNG/>
 </o:OfficeDocumentSettings>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:ActiveWritingStyle Lang="EN-US" VendorID="6" DLLVersion="2" NLCheck="0">1</w:ActiveWritingStyle>
  <w:TrackMoves>false</w:TrackMoves>
  <w:TrackFormatting/>
  <w:HyphenationZone>0</w:HyphenationZone>
  <w:DoNotHyphenateCaps/>
  <w:DrawingGridHorizontalSpacing>0 pt</w:DrawingGridHorizontalSpacing>
  <w:DrawingGridVerticalSpacing>0 pt</w:DrawingGridVerticalSpacing>
  <w:DisplayHorizontalDrawingGridEvery>0</w:DisplayHorizontalDrawingGridEvery>
  <w:DisplayVerticalDrawingGridEvery>0</w:DisplayVerticalDrawingGridEvery>
  <w:UseMarginsForDrawingGridOrigin/>
  <w:ValidateAgainstSchemas>false</w:ValidateAgainstSchemas>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:DoNotUnderlineInvalidXML/>
  <w:DrawingGridHorizontalOrigin>0 pt</w:DrawingGridHorizontalOrigin>
  <w:DrawingGridVerticalOrigin>0 pt</w:DrawingGridVerticalOrigin>
  <w:DoNotShadeFormData/>
  <w:Compatibility>
   <w:BreakWrappedTables/>
   <w:UseNormalStyleForList/>
   <w:DontUseIndentAsNumberingTabStop/>
   <w:DontGrowAutofit/>
   <w:FELineBreak11/>
   <w:WW11IndentRules/>
   <w:DontAutofitConstrainedTables/>
   <w:AutofitLikeWW11/>
   <w:HangulWidthLikeWW11/>
  </w:Compatibility>
 </w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" LatentStyleCount="276">
 </w:LatentStyles>
</xml><![endif]-->
<style>
<!--
 /* Font Definitions */
@font-face
	{font-family:"Courier New";
	panose-1:2 7 3 9 2 2 5 2 4 4;
	mso-font-charset:0;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:Times;
	panose-1:2 0 5 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"New York";
	panose-1:2 2 5 2 6 3 5 6 2 4;
	mso-font-charset:77;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
 /* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";}
h1
	{mso-style-next:Normal;
	margin:0in;
	margin-bottom:.0001pt;
	text-align:justify;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:1;
	font-size:12.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ascii-font-family:Times;
	mso-hansi-font-family:Times;
	mso-font-kerning:0pt;
	text-decoration:underline;
	text-underline:single;}
h2
	{mso-style-next:Normal;
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:2;
	font-size:12.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ascii-font-family:Times;
	mso-hansi-font-family:Times;
	text-decoration:underline;
	text-underline:single;}
h3
	{mso-style-next:Normal;
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:3;
	font-size:14.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ascii-font-family:Times;
	mso-hansi-font-family:Times;
	text-decoration:underline;
	text-underline:single;}
h4
	{mso-style-next:Normal;
	margin:0in;
	margin-bottom:.0001pt;
	text-align:center;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:4;
	font-size:20.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ascii-font-family:Times;
	mso-hansi-font-family:Times;}
h5
	{mso-style-next:Normal;
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:5;
	font-size:12.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ascii-font-family:"Courier New";
	mso-hansi-font-family:"Courier New";}
p.MsoHeading7, li.MsoHeading7, div.MsoHeading7
	{mso-style-next:Normal;
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:none;
	page-break-after:avoid;
	mso-outline-level:7;
	tab-stops:28.0pt 56.0pt 84.0pt 112.0pt 140.0pt 168.0pt 196.0pt 224.0pt 3.5in 280.0pt 308.0pt 336.0pt;
	mso-layout-grid-align:none;
	text-autospace:none;
	font-size:12.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ascii-font-family:Times;
	mso-fareast-font-family:"Times New Roman";
	mso-hansi-font-family:Times;
	mso-bidi-font-family:"Times New Roman";
	color:black;
	font-weight:bold;
	mso-bidi-font-weight:normal;}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	tab-stops:center 3.0in right 6.0in;
	font-size:12.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	tab-stops:center 3.0in right 6.0in;
	font-size:12.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";}
p.MsoBodyText, li.MsoBodyText, div.MsoBodyText
	{margin:0in;
	margin-bottom:.0001pt;
	text-align:justify;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ascii-font-family:Times;
	mso-fareast-font-family:"Times New Roman";
	mso-hansi-font-family:Times;
	mso-bidi-font-family:"Times New Roman";}
p.MsoBodyTextIndent, li.MsoBodyTextIndent, div.MsoBodyTextIndent
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.25in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ascii-font-family:Times;
	mso-fareast-font-family:"Times New Roman";
	mso-hansi-font-family:Times;
	mso-bidi-font-family:"Times New Roman";}
p.MsoBodyText2, li.MsoBodyText2, div.MsoBodyText2
	{margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:11.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ascii-font-family:"Courier New";
	mso-fareast-font-family:"Times New Roman";
	mso-hansi-font-family:"Courier New";
	mso-bidi-font-family:"Times New Roman";}
p.MsoBodyText3, li.MsoBodyText3, div.MsoBodyText3
	{margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ascii-font-family:"Courier New";
	mso-fareast-font-family:"Times New Roman";
	mso-hansi-font-family:"Courier New";
	mso-bidi-font-family:"Times New Roman";}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;
	text-underline:single;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;
	text-underline:single;}
 /* Page Definitions */
@page
	{mso-page-border-surround-header:no;
	mso-page-border-surround-footer:no;}
@page Section1
	{size:8.5in 11.0in;
	margin:1.0in .75in 1.0in .75in;
	mso-header-margin:.5in;
	mso-footer-margin:.5in;
	mso-even-header:url(":proj4_files:header.htm") eh1;
	mso-header:url(":proj4_files:header.htm") h1;
	mso-even-footer:url(":proj4_files:header.htm") ef1;
	mso-footer:url(":proj4_files:header.htm") f1;
	mso-first-header:url(":proj4_files:header.htm") fh1;
	mso-first-footer:url(":proj4_files:header.htm") ff1;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
table.MsoNormalTable
	{mso-style-name:"Table Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0in 5.4pt 0in 5.4pt;
	mso-para-margin:0in;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ascii-font-family:"New York";
	mso-hansi-font-family:"New York";}
</style>
<![endif]-->
</head>

<body bgcolor=white lang=EN-US link=blue vlink=purple style='tab-interval:.5in'>

<div class=Section1>

<p class=MsoNormal align=center style='text-align:center'><b style='mso-bidi-font-weight:
normal'><span style='font-size:20.0pt;mso-bidi-font-size:10.0pt;font-family:
Times'>Programming Project 4:<o:p></o:p></span></b></p>

<h4>Kernel Resource Management</h4>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal style='text-align:justify'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><u><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;font-family:Times'>Due Date:</span></u></b><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;font-family:Times'> </span><span
style='font-family:Times'>______________________________<o:p></o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><u><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;font-family:Times'>Duration:</span></u></b><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;font-family:Times'><span
style="mso-spacerun: yes">&nbsp; </span></span><span style='font-family:Times'>One
Week<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<h3>Overview and Goal</h3>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>In this project, you will
implement three monitors that will be used in our Kernel.<span
style="mso-spacerun: yes">&nbsp; </span>These are the ThreadManager, the ProcessManager,
and the FrameManager.<span style="mso-spacerun: yes">&nbsp; </span>The code you
write will be similar to other code from the previous projects in that these
three monitors will orchestrate the allocation and freeing of resources.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>There is also an additional
task&#8212;re-implement the Condition and Mutex classes to provide Hoare
Semantics&#8212;but that code will not be used in the Kernel.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<h3>Download New Files</h3>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Start by creating a new
directory for this project and then download all the files from:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><span style='mso-tab-count:
1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><b
style='mso-bidi-font-weight:normal'><span style='font-family:Courier'>http://www.cs.pdx.edu/~harry/Blitz/OSProject/p4/</span></b><span
style='font-family:"Courier New"'><o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Even though some of the
files have the same names, be sure to get new copies for each project.<span
style="mso-spacerun: yes">&nbsp; </span>In general some files may be modified.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Please keep your old files
from previous projects separate and don’t modify them once you submit
them.<span style="mso-spacerun: yes">&nbsp; </span>This is a good rule for all
programming projects in all classes.<span style="mso-spacerun: yes">&nbsp;
</span>If there is ever any question about whether code was completed on time,
we can always go back and look at the Unix “file modification date”
information.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>For this project, you should
get the following files:<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>makefile<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>DISK<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>Runtime.s<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>Switch.s<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>System.h<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>System.c<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>List.h<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>List.c<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>BitMap.h<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>BitMap.c<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>Main.h<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>Main.c<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>Kernel.h<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>Kernel.c<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoNormal><span style='font-family:Times'>The packages called <b
style='mso-bidi-font-weight:normal'>Thread</b> and <b style='mso-bidi-font-weight:
normal'>Synch</b> have been merged together into one package, now called <b
style='mso-bidi-font-weight:normal'>Kernel</b>.<span style="mso-spacerun:
yes">&nbsp; </span>This package contains quite a bit of other material as well,
which will be used for later projects.<span style="mso-spacerun: yes">&nbsp;
</span>In this and the remaining projects, you will be modifying the <b
style='mso-bidi-font-weight:normal'>Kernel.c</b> and <b style='mso-bidi-font-weight:
normal'>Kernel.h</b> files.<span style="mso-spacerun: yes">&nbsp; </span>Don’t
modify the code that is not used in this project; just leave it in the package.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>The <b style='mso-bidi-font-weight:
normal'>Kernel.c</b> file contains the following stuff, in this order:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><b style='mso-bidi-font-weight:
normal'><span style='font-family:Times'>Thread scheduler functions<o:p></o:p></span></b></p>

<p class=MsoNormal style='margin-left:.5in'><b style='mso-bidi-font-weight:
normal'><span style='font-family:Times'>Semaphore class<o:p></o:p></span></b></p>

<p class=MsoNormal style='margin-left:.5in'><b style='mso-bidi-font-weight:
normal'><span style='font-family:Times'>Mutex class<o:p></o:p></span></b></p>

<p class=MsoNormal style='margin-left:.5in'><b style='mso-bidi-font-weight:
normal'><span style='font-family:Times'>Condition class<o:p></o:p></span></b></p>

<p class=MsoNormal style='margin-left:.5in'><b style='mso-bidi-font-weight:
normal'><span style='font-family:Times'>Thread class<o:p></o:p></span></b></p>

<p class=MsoNormal style='margin-left:.5in'><b style='mso-bidi-font-weight:
normal'><span style='font-family:Times'>ThreadManager class<o:p></o:p></span></b></p>

<p class=MsoNormal style='margin-left:.5in'><b style='mso-bidi-font-weight:
normal'><span style='font-family:Times'>ProcessControlBlock class<o:p></o:p></span></b></p>

<p class=MsoNormal style='margin-left:.5in'><b style='mso-bidi-font-weight:
normal'><span style='font-family:Times'>ProcessManager class<o:p></o:p></span></b></p>

<p class=MsoNormal style='margin-left:.5in'><b style='mso-bidi-font-weight:
normal'><span style='font-family:Times'>FrameManager class<o:p></o:p></span></b></p>

<p class=MsoNormal style='margin-left:.5in'><b style='mso-bidi-font-weight:
normal'><span style='font-family:Times'>AddrSpace class<o:p></o:p></span></b></p>

<p class=MsoNormal style='margin-left:.5in'><b style='mso-bidi-font-weight:
normal'><span style='font-family:Times'>TimerInterruptHandler<o:p></o:p></span></b></p>

<p class=MsoNormal style='margin-left:.5in'><b style='mso-bidi-font-weight:
normal'><span style='font-family:Times'>other interrupt handlers<o:p></o:p></span></b></p>

<p class=MsoNormal style='margin-left:.5in'><b style='mso-bidi-font-weight:
normal'><span style='font-family:Times'>SyscallTrapHandler<o:p></o:p></span></b></p>

<p class=MsoNormal style='margin-left:.5in'><b style='mso-bidi-font-weight:
normal'><span style='font-family:Times'>Handle functions<o:p></o:p></span></b></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>In this project, you can
ignore everything after <b style='mso-bidi-font-weight:normal'>TimerInterruptHandler</b>.<span
style="mso-spacerun: yes">&nbsp; </span>The classes called <b style='mso-bidi-font-weight:
normal'>ThreadManager</b>, <b style='mso-bidi-font-weight:normal'>ProcessManager</b>,
and <b style='mso-bidi-font-weight:normal'>FrameManager</b> are provided in
outline, but the bodies of the methods are unimplemented.<span
style="mso-spacerun: yes">&nbsp; </span>You will add implementations.<span
style="mso-spacerun: yes">&nbsp; </span>Some other methods are marked
“unimplemented;” those will be implemented in later projects.<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>The <b style='mso-bidi-font-weight:
normal'>BitMap</b> package contains code you will use; read over it but do not
modify it.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>The <b style='mso-bidi-font-weight:
normal'>makefile</b> has been modified to compile the new code.<span
style="mso-spacerun: yes">&nbsp; </span>As before, it produces an executable
called <b style='mso-bidi-font-weight:normal'>os</b>.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>You may modify the file <b
style='mso-bidi-font-weight:normal'>Main.c</b> while testing, but when you do
your final run, please use the <b style='mso-bidi-font-weight:normal'>Main.c </b>file
as it was distributed.<span style="mso-spacerun: yes">&nbsp; </span>In the
final version of our kernel, the <b style='mso-bidi-font-weight:normal'>Main</b>
package will perform all initialization and will create the first thread.<span
style="mso-spacerun: yes">&nbsp; </span>The current version performs
initialization and then calls some testing functions.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<h3>Task 1:<span style="mso-spacerun: yes">&nbsp; </span>Threads and the
ThreadManager</h3>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>In this task, you will
modify the <b style='mso-bidi-font-weight:normal'>ThreadManager</b> class and
provide implementations for the following methods:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:Times'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Init<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:Times'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>GetANewThread<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:Times'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>FreeThread<o:p></o:p></span></b></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>In our kernel, we will avoid
allocating dynamic memory.<span style="mso-spacerun: yes">&nbsp; </span>In
other words, we will not use the heap.<span style="mso-spacerun: yes">&nbsp;
</span>All important resources will be created at startup time and then we will
carefully monitor their allocation and deallocation.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>An example of an important
resource is <b style='mso-bidi-font-weight:normal'>Thread</b> objects.<span
style="mso-spacerun: yes">&nbsp; </span>Since we will not be able to allocate
new objects on the heap while the kernel is running, all the <b
style='mso-bidi-font-weight:normal'>Thread</b> objects must be created ahead of
time.<span style="mso-spacerun: yes">&nbsp; </span>Obviously, we can’t predict
how many threads we will need, so we will allocate a fixed number of <b
style='mso-bidi-font-weight:normal'>Thread</b> objects (e.g., 10) and re-use
them.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>When a user process starts
up, the kernel will need to obtain a new <b style='mso-bidi-font-weight:normal'>Thread</b>
object for it.<span style="mso-spacerun: yes">&nbsp; </span>When a process
dies, the <b style='mso-bidi-font-weight:normal'>Thread</b> object must be
returned to a pool of free <b style='mso-bidi-font-weight:normal'>Thread</b>
objects, so it can be recycled for another process.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:Times'>Kernel.h</span></b><span style='font-family:Times'>
contains the line:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span><u>const</u>
MAX_NUMBER_OF_PROCESSES = 10<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Since each process in our OS
will have at most one thread, we will also use this number to determine how
many <b style='mso-bidi-font-weight:normal'>Thread</b> objects to place into
the free pool initially.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>To manage the <b
style='mso-bidi-font-weight:normal'>Thread</b> objects, we will use the <b
style='mso-bidi-font-weight:normal'>ThreadManager</b> class.<span
style="mso-spacerun: yes">&nbsp; </span>There will be only one instance of this
class, called <b style='mso-bidi-font-weight:normal'>threadManager</b>, and it
is created and initialized at startup time in <b style='mso-bidi-font-weight:
normal'>Main.c</b>.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Whenever you need a new <b
style='mso-bidi-font-weight:normal'>Thread</b> object, you can invoke <b
style='mso-bidi-font-weight:normal'>threadManger.GetANewThread</b>.<span
style="mso-spacerun: yes">&nbsp; </span>This method should suspend and wait if
there are currently none available.<span style="mso-spacerun: yes">&nbsp;
</span>Whenever a thread terminates, the scheduler will invoke <b
style='mso-bidi-font-weight:normal'>FreeThread</b>.<span style="mso-spacerun:
yes">&nbsp; </span>In fact, the <b style='mso-bidi-font-weight:normal'>Run</b>
function has been modified in this project to invoke <b style='mso-bidi-font-weight:
normal'>FreeThread</b> when a thread terminates&#8212;thereby adding it to the
free list&#8212;instead of setting its <b style='mso-bidi-font-weight:normal'>status</b>
to UNUSED.<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Here is the definition of <b
style='mso-bidi-font-weight:normal'>ThreadManager</b> as initially distributed:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<span style='font-size:10.0pt;font-family:Courier;mso-fareast-font-family:"Times New Roman";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-US;mso-fareast-language:
EN-US'><br clear=ALL style='page-break-before:always'>
</span>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style="mso-spacerun: yes">&nbsp; </span><u>class</u> ThreadManager<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span><u>superclass</u> Object<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span><u>fields<o:p></o:p></u></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>threadTable: <u>array</u>
[MAX_NUMBER_OF_PROCESSES] <u>of</u> Thread<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>freeList: List
[Thread]<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span><u>methods<o:p></o:p></u></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Init ()<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Print ()<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>GetANewThread
() <u>returns</u> <u>ptr</u> <u>to</u> Thread<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span><span style="mso-spacerun:
yes">&nbsp;&nbsp;</span>FreeThread (th: <u>ptr</u> <u>to</u> Thread)<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style="mso-spacerun: yes">&nbsp; </span><u>endClass<o:p></o:p></u></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>When you write the <b
style='mso-bidi-font-weight:normal'>Init</b> method, you’ll need to initialize
the array of <b style='mso-bidi-font-weight:normal'>Thread</b>s and you’ll need
to initialize each <b style='mso-bidi-font-weight:normal'>Thread</b> in the
array and set its status to <b style='mso-bidi-font-weight:normal'>UNUSED</b>.<span
style="mso-spacerun: yes">&nbsp; </span>(Each Thread will have one of the
following as its status: <b style='mso-bidi-font-weight:normal'>READY</b>, <b
style='mso-bidi-font-weight:normal'>RUNNING</b>, <b style='mso-bidi-font-weight:
normal'>BLOCKED</b>, <b style='mso-bidi-font-weight:normal'>JUST_CREATED</b>,
and <b style='mso-bidi-font-weight:normal'>UNUSED</b>.)<span
style="mso-spacerun: yes">&nbsp; </span>Threads should have the status <b
style='mso-bidi-font-weight:normal'>UNUSED</b> iff they are on the <b
style='mso-bidi-font-weight:normal'>freeList</b>.<span style="mso-spacerun:
yes">&nbsp; </span>You’ll also need to initialize the <b style='mso-bidi-font-weight:
normal'>freeList</b> and place all <b style='mso-bidi-font-weight:normal'>Thread</b>s
in the <b style='mso-bidi-font-weight:normal'>threadTable</b> array on the <b
style='mso-bidi-font-weight:normal'>freeList</b> during initialization.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>You will need to turn the <b
style='mso-bidi-font-weight:normal'>ThreadManager</b> into a “monitor.”<span
style="mso-spacerun: yes">&nbsp; </span>To do this, you might consider adding a
<b style='mso-bidi-font-weight:normal'>Mutex</b> lock (perhaps called <b
style='mso-bidi-font-weight:normal'>threadManagerLock</b>) and a condition
variable (perhaps called <b style='mso-bidi-font-weight:normal'>aThreadBecameFree</b>)
to the <b style='mso-bidi-font-weight:normal'>ThreadManager</b> class.<span
style="mso-spacerun: yes">&nbsp; </span>The <b style='mso-bidi-font-weight:
normal'>Init</b> method will also need to initialize <b style='mso-bidi-font-weight:
normal'>threadManagerLock </b>and <b style='mso-bidi-font-weight:normal'>aThreadBecameFree</b>.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>The <b style='mso-bidi-font-weight:
normal'>GetANewThread</b> and <b style='mso-bidi-font-weight:normal'>FreeThread</b>
methods are both “entry methods,” so they must obtain the monitor lock in the
first statement and release it in the last statement.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:Times'>GetANewThread</span></b><span style='font-family:
Times'> will remove and return a <b style='mso-bidi-font-weight:normal'>Thread</b>
from the <b style='mso-bidi-font-weight:normal'>freeList</b>.<span
style="mso-spacerun: yes">&nbsp; </span>If the <b style='mso-bidi-font-weight:
normal'>freeList</b> is empty, this method will need to wait on the condition
of a thread becoming available.<span style="mso-spacerun: yes">&nbsp;
</span>The <b style='mso-bidi-font-weight:normal'>FreeThread</b> method will
add a <b style='mso-bidi-font-weight:normal'>Thread</b> back to the <b
style='mso-bidi-font-weight:normal'>freeList</b> and signal anyone waiting on
the condition.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>The <b style='mso-bidi-font-weight:
normal'>GetANewThread</b> method should also change the <b style='mso-bidi-font-weight:
normal'>Thread</b> status to <b style='mso-bidi-font-weight:normal'>JUST_CREATED</b>
and the <b style='mso-bidi-font-weight:normal'>FreeThread</b> method should
change it back to <b style='mso-bidi-font-weight:normal'>UNUSED</b>.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>We have provided code for
the <b style='mso-bidi-font-weight:normal'>Print</b> method to print out the
entire table of <b style='mso-bidi-font-weight:normal'>Thread</b>s.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Note that the <b
style='mso-bidi-font-weight:normal'>Print</b> method disables interrupts.<span
style="mso-spacerun: yes">&nbsp; </span>The <b style='mso-bidi-font-weight:
normal'>Print</b> method is used only while debugging and will not be called in
a running OS so this is okay.<span style="mso-spacerun: yes">&nbsp;
</span>Within the <b style='mso-bidi-font-weight:normal'>Print</b> method, we
want to get a clean picture of the system state&#8212;a
“snapshot”&#8212;(without worrying about what other threads may be doing) so
disabling interrupts seems acceptable.<span style="mso-spacerun: yes">&nbsp;
</span>However, the other methods&#8212;<b style='mso-bidi-font-weight:normal'>Init</b>,
<b style='mso-bidi-font-weight:normal'>GetAThread</b> and <b style='mso-bidi-font-weight:
normal'>FreeThread</b>&#8212;must NOT disable interrupts, beyond what is done
within the implementations of <b style='mso-bidi-font-weight:normal'>Mutex</b>,
<b style='mso-bidi-font-weight:normal'>Condition</b>, etc.<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'>In <b
style='mso-bidi-font-weight:normal'>Main.c</b> we have provided a test routine
called <b style='mso-bidi-font-weight:normal'>RunThreadManagerTests</b>, which
creates 20 threads to simultaneously invoke <b style='mso-bidi-font-weight:
normal'>GetAThread</b> and <b style='mso-bidi-font-weight:normal'>FreeThread</b>.<span
style="mso-spacerun: yes">&nbsp; </span>Let’s call these the “testing threads”
as opposed to the “resource threads,” which are the objects that the <b
style='mso-bidi-font-weight:normal'>ThreadManager</b> will allocate and monitor.<span
style="mso-spacerun: yes">&nbsp; </span>There are 20 testing threads and only
10 resource thread objects.<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'>Every
thread that terminates will be added back to the <b style='mso-bidi-font-weight:
normal'>freeList</b> (by <b style='mso-bidi-font-weight:normal'>Run</b>, which
calls <b style='mso-bidi-font-weight:normal'>FreeThread</b>).<span
style="mso-spacerun: yes">&nbsp; </span>Since the testing threads were never
obtained by a call to <b style='mso-bidi-font-weight:normal'>GetANewThread</b>,
it would be wrong to add them back to the <b style='mso-bidi-font-weight:normal'>freeList</b>.<span
style="mso-spacerun: yes">&nbsp; </span>Therefore, each testing thread does not
actually terminate.<span style="mso-spacerun: yes">&nbsp; </span>Instead it
freezes up by waiting on a semaphore that is never signaled.<span
style="mso-spacerun: yes">&nbsp; </span>By the way, the testing threads are
allocated on the heap, in violation of the principle that the kernel must never
allocate anything on the heap, but this is okay, since this is only debugging
code, which will not become a part of the kernel.<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'>In
the kernel, we may have threads that are not part of the <b style='mso-bidi-font-weight:
normal'>threadTable</b> pool (such as the <b style='mso-bidi-font-weight:normal'>IdleThread</b>),
but these threads must never terminate, so there is no possibility that they
will be put onto the <b style='mso-bidi-font-weight:normal'>freeList</b>.<span
style="mso-spacerun: yes">&nbsp; </span>Thus, the only things on the <b
style='mso-bidi-font-weight:normal'>freeList</b> should be <b style='mso-bidi-font-weight:
normal'>Threads</b> from <b style='mso-bidi-font-weight:normal'>threadTable</b>.<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'>You
will also notice that the <b style='mso-bidi-font-weight:normal'>Thread</b>
class has been changed slightly to add the following fields:<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
font-family:Courier'><span style="mso-spacerun: yes">&nbsp; </span><u>class</u>
Thread<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
font-family:Courier'><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;
</span>...<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
font-family:Courier'><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span><u>fields<o:p></o:p></u></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
font-family:Courier'><span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>...<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
font-family:Courier'><span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>isUserThread: <u>bool</u><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
font-family:Courier'><span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>userRegs: <u>array</u> [15] <u>of</u>
<u>int</u><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span>-- Space
for r1..r15<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
font-family:Courier'><span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>myProcess: <u>ptr</u> <u>to</u>
ProcessControlBlock<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
font-family:Courier'><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span><u>methods<o:p></o:p></u></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
font-family:Courier'><span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>...<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.5in'><span style='font-size:10.0pt;
font-family:Courier'><span style="mso-spacerun: yes">&nbsp; </span><u>endClass<o:p></o:p></u></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>These fields will be used in
a later project.<span style="mso-spacerun: yes">&nbsp; </span>The <b
style='mso-bidi-font-weight:normal'>Thread</b> methods are unchanged.<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<h3>Task 2:<span style="mso-spacerun: yes">&nbsp; </span>Processes and the
ProcessManager</h3>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>In our kernel, each
user-level process will contain only one thread.<span style="mso-spacerun:
yes">&nbsp; </span>For each process, there will be a single <b
style='mso-bidi-font-weight:normal'>ProcessContolBlock</b> object containing
the per-process information, such as information about open files and the
process’s address space.<span style="mso-spacerun: yes">&nbsp; </span>Each <b
style='mso-bidi-font-weight:normal'>ProcessControlBlock</b> object will point
to a <b style='mso-bidi-font-weight:normal'>Thread</b> object and each <b
style='mso-bidi-font-weight:normal'>Thread</b> object will point back to the <b
style='mso-bidi-font-weight:normal'>ProcessControlBlock</b>.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>There may be other threads,
called “kernel threads,” which are not associated with any user-level
process.<span style="mso-spacerun: yes">&nbsp; </span>There will only be a
small, fixed number of kernel threads and these will be created at kernel
start-up time.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>For now, we will only have a
modest number of <b style='mso-bidi-font-weight:normal'>ProcessControlBlocks</b>,
which will make our testing job a little easier, but in a real OS this constant
would be larger.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-size:10.0pt;
font-family:Courier'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><u>const</u>
MAX_NUMBER_OF_PROCESSES = 10<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>All processes will be
preallocated in an array called <b style='mso-bidi-font-weight:normal'>processTable</b>,
which will be managed by the <b style='mso-bidi-font-weight:normal'>ProcessManager</b>
object, much like the <b style='mso-bidi-font-weight:normal'>Thread</b> objects
are managed by the <b style='mso-bidi-font-weight:normal'>ThreadManager</b>
object.<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Each process will be
represented with an object of this class:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<span style='font-size:10.0pt;font-family:Courier;mso-fareast-font-family:"Times New Roman";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-US;mso-fareast-language:
EN-US'><br clear=ALL style='page-break-before:always'>
</span>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style="mso-spacerun: yes">&nbsp; </span><u>class</u> ProcessControlBlock<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-size:10.0pt;
font-family:Courier'><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span><u>superclass</u>
Listable<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span><u>fields<o:p></o:p></u></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>pid: <u>int</u><o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>parentsPid: <u>int</u>
<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style="mso-spacerun: yes">&nbsp;&nbsp; </span><span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;</span>status: <u>int</u><span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>-- ACTIVE, ZOMBIE, or FREE<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>myThread: <u>ptr</u>
<u>to</u> Thread<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>exitStatus: <u>int</u><o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-size:10.0pt;
font-family:Courier'><span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>addrSpace: AddrSpace<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-size:10.0pt;
font-family:Courier'><span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>fileDescriptor: <u>array</u>
[MAX_FILES_PER_PROCESS] <u>of</u> <u>ptr</u> <u>to</u> OpenFile<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span><u>methods<o:p></o:p></u></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Init ()<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Print ()<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>PrintShort ()<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style="mso-spacerun: yes">&nbsp; </span><u>endClass<o:p></o:p></u></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Each process will have a
process ID (the field named <b style='mso-bidi-font-weight:normal'>pid</b>).<span
style="mso-spacerun: yes">&nbsp; </span>Each process ID will be a unique
number, from 1 on up.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Processes will be related to
other processes in a hierarchical parent-child tree.<span style="mso-spacerun:
yes">&nbsp; </span>Each process will know who its parent process is.<span
style="mso-spacerun: yes">&nbsp; </span>The field called <b style='mso-bidi-font-weight:
normal'>parentsPid</b> is a integer identifying the parent.<span
style="mso-spacerun: yes">&nbsp; </span>One parent may have zero, one, or many
child processes.<span style="mso-spacerun: yes">&nbsp; </span>To find the
children of process X, we will have to search all processes for processes whose
<b style='mso-bidi-font-weight:normal'>parentsPid</b> matches X’s <b
style='mso-bidi-font-weight:normal'>pid</b>.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>The <b style='mso-bidi-font-weight:
normal'>ProcessControlBlock</b> objects will be more like C structs than
full-blown C++/Java objects: the fields will be accessed from outside the class
but the class will not contain many methods of its own.<span
style="mso-spacerun: yes">&nbsp; </span>Other than initializing the object and
a couple of print methods, there will be no other methods for <b
style='mso-bidi-font-weight:normal'>ProcessControlBlock</b>.<span
style="mso-spacerun: yes">&nbsp; </span>We are providing the implementations
for the <b style='mso-bidi-font-weight:normal'>Init</b>, <b style='mso-bidi-font-weight:
normal'>Print</b> and <b style='mso-bidi-font-weight:normal'>PrintShort</b>
methods.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Since we will have only a
fixed, small number of <b style='mso-bidi-font-weight:normal'>ProcesControlBlocks</b>,
these are resources which must be allocated.<span style="mso-spacerun:
yes">&nbsp; </span>This is the purpose of the monitor class called <b
style='mso-bidi-font-weight:normal'>ProcessManager</b>.</span><span
style='font-family:"Courier New"'><o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'>At
start-up time, all <b style='mso-bidi-font-weight:normal'>ProcessControlBlocks</b>
are initially FREE.<span style="mso-spacerun: yes">&nbsp; </span>As user-level
processes are created, these objects will be allocated and when the user-level
process dies, the corresponding <b style='mso-bidi-font-weight:normal'>ProcessControlBlock</b>
will become FREE once again.<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'>In
Unix and in our kernel, death is a two stage process.<span style="mso-spacerun:
yes">&nbsp; </span>First, an ACTIVE process will execute some system call
(e.g., <b style='mso-bidi-font-weight:normal'>Exit()</b>) when it wants to
terminate.<span style="mso-spacerun: yes">&nbsp; </span>Although the thread
will be terminated, the <b style='mso-bidi-font-weight:normal'>ProcessControlBlock</b>
cannot be immediately freed, so the process will then become a ZOMBIE.<span
style="mso-spacerun: yes">&nbsp; </span>At some later time, when we are done
with the <b style='mso-bidi-font-weight:normal'>ProcessControlBlock</b> it can
be FREEd.<span style="mso-spacerun: yes">&nbsp; </span>Once it is FREE, it is
added to the <b style='mso-bidi-font-weight:normal'>freeList</b> and can be
reused when a new process is begun.<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'>The <b
style='mso-bidi-font-weight:normal'>exitStatus</b> is only valid after a
process has terminated (e.g., a call to <b style='mso-bidi-font-weight:normal'>Exit()</b>).<span
style="mso-spacerun: yes">&nbsp; </span>So a ZOMBIE process has a terminated
thread and a valid <b style='mso-bidi-font-weight:normal'>exitStatus</b>.<span
style="mso-spacerun: yes">&nbsp; </span>The ZOMBIE state is necessary just to
keep the exit status around.<span style="mso-spacerun: yes">&nbsp; </span>The
reason we cannot free the <b style='mso-bidi-font-weight:normal'>ProcessControlBlock</b>
is because we need somewhere to store this integer.<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'>For
this project, we will ignore the <b style='mso-bidi-font-weight:normal'>exitStatus</b>.<span
style="mso-spacerun: yes">&nbsp; </span>It need not be initialized, since the
default initialization (to zero) is fine.<span style="mso-spacerun: yes">&nbsp;
</span>Also, we will ignore the ZOMBIE state.<span style="mso-spacerun:
yes">&nbsp; </span>Every process will be either ACTIVE or FREE.<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'>Each
user-level process will have a virtual address space and this is described by
the field <b style='mso-bidi-font-weight:normal'>addrSpace</b>.<span
style="mso-spacerun: yes">&nbsp; </span>The code we have supplied for <b
style='mso-bidi-font-weight:normal'>ProcessControlBlock.Init</b> will
initialize the <b style='mso-bidi-font-weight:normal'>addrSpace</b>.<span
style="mso-spacerun: yes">&nbsp; </span>Although the <b style='mso-bidi-font-weight:
normal'>addrSpace</b> will not be used in this project, it will be discussed
later in this document.<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'>The <b
style='mso-bidi-font-weight:normal'>myThread</b> field will point to the
process’s <b style='mso-bidi-font-weight:normal'>Thread</b>, but we will not
set it in this project.<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'>The <b
style='mso-bidi-font-weight:normal'>fileDescriptors</b> field describes the
files that this process has open.<span style="mso-spacerun: yes">&nbsp;
</span>It will not be used in this project.<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'>Here
is the definition of the <b style='mso-bidi-font-weight:normal'>ProcessManager</b>
object.<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoFooter><span style='font-size:10.0pt;font-family:"Courier New"'><span
style="mso-spacerun: yes">&nbsp; </span><u>class</u> ProcessManager<o:p></o:p></span></p>

<p class=MsoFooter><span style='font-size:10.0pt;font-family:"Courier New"'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span><u>superclass</u> Object<o:p></o:p></span></p>

<p class=MsoFooter><span style='font-size:10.0pt;font-family:"Courier New"'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span><u>fields<o:p></o:p></u></span></p>

<p class=MsoFooter><span style='font-size:10.0pt;font-family:"Courier New"'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>processTable: <u>array</u>
[MAX_NUM_OF_PROCESSES] <u>of</u> ProcessControlBlock<o:p></o:p></span></p>

<p class=MsoFooter><span style='font-size:10.0pt;font-family:"Courier New"'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>processManagerLock:
Mutex<o:p></o:p></span></p>

<p class=MsoFooter><span style='font-size:10.0pt;font-family:"Courier New"'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>aProcessBecameFree: Condition<o:p></o:p></span></p>

<p class=MsoFooter><span style='font-size:10.0pt;font-family:"Courier New"'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>freeList: List
[ProcessControlBlock]<o:p></o:p></span></p>

<p class=MsoFooter><span style='font-size:10.0pt;font-family:"Courier New"'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>aProcessDied:
Condition<o:p></o:p></span></p>

<p class=MsoFooter><span style='font-size:10.0pt;font-family:"Courier New"'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span><u>methods<o:p></o:p></u></span></p>

<p class=MsoFooter><span style='font-size:10.0pt;font-family:"Courier New"'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Init ()<o:p></o:p></span></p>

<p class=MsoFooter><span style='font-size:10.0pt;font-family:"Courier New"'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Print ()<o:p></o:p></span></p>

<p class=MsoFooter><span style='font-size:10.0pt;font-family:"Courier New"'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>PrintShort ()<o:p></o:p></span></p>

<p class=MsoFooter><span style='font-size:10.0pt;font-family:"Courier New"'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>GetANewProcess
() <u>returns</u> <u>ptr</u> <u>to</u> ProcessControlBlock<o:p></o:p></span></p>

<p class=MsoFooter><span style='font-size:10.0pt;font-family:"Courier New"'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>FreeProcess (p:
<u>ptr</u> <u>to</u> ProcessControlBlock)<o:p></o:p></span></p>

<p class=MsoFooter><span style='font-size:10.0pt;font-family:"Courier New"'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>TurnIntoZombie
(p: <u>ptr</u> <u>to</u> ProcessControlBlock)<o:p></o:p></span></p>

<p class=MsoFooter><span style='font-size:10.0pt;font-family:"Courier New"'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>WaitForZombie
(proc: <u>ptr</u> <u>to</u> ProcessControlBlock) <u>returns</u> <u>int</u><o:p></o:p></span></p>

<p class=MsoFooter><span style='font-size:10.0pt;font-family:"Courier New"'><span
style="mso-spacerun: yes">&nbsp; </span><u>endClass<o:p></o:p></u></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>There will be only one <b
style='mso-bidi-font-weight:normal'>ProcessManager</b> and this instance
(initialized at start-up time) will be called <b style='mso-bidi-font-weight:
normal'>processManager</b>.<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>processManager
= <u>new</u> ProcessManager<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>processManager.Init ()<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'>The <b
style='mso-bidi-font-weight:normal'>Print()</b> and <b style='mso-bidi-font-weight:
normal'>PrintShort()</b> methods for <b style='mso-bidi-font-weight:normal'>ProcessControlBlocks</b>
are provided for you.<span style="mso-spacerun: yes">&nbsp; </span>You are to
implement the methods <b style='mso-bidi-font-weight:normal'>Init</b>, <b
style='mso-bidi-font-weight:normal'>GetANewProcess</b>, and <b
style='mso-bidi-font-weight:normal'>FreeProcess</b>.<span style="mso-spacerun:
yes">&nbsp; </span>The methods <b style='mso-bidi-font-weight:normal'>TurnIntoZombie</b>
and <b style='mso-bidi-font-weight:normal'>WaitForZombie</b> will be
implemented in a later project and can be ignored for now.<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>The <b style='mso-bidi-font-weight:
normal'>freeList</b> is a list of all <b style='mso-bidi-font-weight:normal'>ProcessControlBlocks</b>
that are FREE.<span style="mso-spacerun: yes">&nbsp; </span>The status of a <b
style='mso-bidi-font-weight:normal'>ProcessControlBlock</b> should be FREE if
and only if it is on the <b style='mso-bidi-font-weight:normal'>freeList</b>.<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>We assume that several
threads may more-or-less simultaneously request a new <b style='mso-bidi-font-weight:
normal'>ProcessControlBlock</b> by calling <b style='mso-bidi-font-weight:normal'>GetANewProcess</b>.<span
style="mso-spacerun: yes">&nbsp; </span>The <b style='mso-bidi-font-weight:
normal'>ProcessManager</b> should be a “monitor,” in order to protect the <b
style='mso-bidi-font-weight:normal'>freeList</b> from concurrent access.<span
style="mso-spacerun: yes">&nbsp; </span>The Mutex called <b style='mso-bidi-font-weight:
normal'>processManagerLock</b> is for that purpose.<span style="mso-spacerun:
yes">&nbsp; </span>When a <b style='mso-bidi-font-weight:normal'>ProcessControlBlock</b>
is added to the <b style='mso-bidi-font-weight:normal'>freeList</b>, the
condition <b style='mso-bidi-font-weight:normal'>aProcessBecameFree</b> can be <b
style='mso-bidi-font-weight:normal'>Signal</b>ed to wake up any thread waiting
for a <b style='mso-bidi-font-weight:normal'>ProcessControlBlock</b>.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Initializing the <b
style='mso-bidi-font-weight:normal'>ProcessControlManager</b> should initialize<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><span style='mso-tab-count:
1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>the
<b style='mso-bidi-font-weight:normal'>processTable</b> array<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><span style='mso-tab-count:
1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>all
the <b style='mso-bidi-font-weight:normal'>ProcessControlBlocks</b> in that
array<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><span style='mso-tab-count:
1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>the
<b style='mso-bidi-font-weight:normal'>processManagerLock</b><o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><span style='mso-tab-count:
1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>the
<b style='mso-bidi-font-weight:normal'>aProcessBecameFree</b> and the <b
style='mso-bidi-font-weight:normal'>aProcessDied</b> condition variables<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><span style='mso-tab-count:
1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>the
<b style='mso-bidi-font-weight:normal'>freeList</b><o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>All <b style='mso-bidi-font-weight:
normal'>ProcessControlBlocks</b> should be initialized and placed on the <b
style='mso-bidi-font-weight:normal'>freeList</b>.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>The condition called <b
style='mso-bidi-font-weight:normal'>aProcessDied</b> is signaled when a process
goes from ACTIVE to ZOMBIE.<span style="mso-spacerun: yes">&nbsp; </span>It
will not be used in this project, but should be initialized nonetheless.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>The <b style='mso-bidi-font-weight:
normal'>GetANewProcess</b> method is similar to the <b style='mso-bidi-font-weight:
normal'>GetANewThread</b> method, except that it must also assign a process
ID.<span style="mso-spacerun: yes">&nbsp; </span>In other words, it must set
the <b style='mso-bidi-font-weight:normal'>pid</b>.<span style="mso-spacerun:
yes">&nbsp; </span>The <b style='mso-bidi-font-weight:normal'>ProcessManager</b>
will need to manage a single integer for this purpose.<span
style="mso-spacerun: yes">&nbsp; </span>(Perhaps you might call it <b
style='mso-bidi-font-weight:normal'>nextPid</b>).<span style="mso-spacerun:
yes">&nbsp; </span>Every time a <b style='mso-bidi-font-weight:normal'>ProcessControlBlock</b>
is allocated (i.e., everytime <b style='mso-bidi-font-weight:normal'>GetANewProcess</b>
is called), this integer must be incremented and used to set the process’s <b
style='mso-bidi-font-weight:normal'>pid</b>.<span style="mso-spacerun:
yes">&nbsp; </span><b style='mso-bidi-font-weight:normal'>GetANewProcess</b>
should also set the process’s status to ACTIVE.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>The <b style='mso-bidi-font-weight:
normal'>FreeProcess</b> method must change the process’s status to FREE and add
it to the free list.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Both <b style='mso-bidi-font-weight:
normal'>GetANewProcess</b> and <b style='mso-bidi-font-weight:normal'>FreeProcess</b>
are monitor entry methods.<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<h3>Task 3: The Frame Manager</h3>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>The lower portion of the
physical memory of the BLITZ computer, starting at location zero, will contain
the kernel code.<span style="mso-spacerun: yes">&nbsp; </span>It is not clear
exactly how big this will be, but we will allocate 1 MByte for the kernel
code.<span style="mso-spacerun: yes">&nbsp; </span>After that will come a
portion of memory (called the “frame region”) which will be allocated for
various purposes.<span style="mso-spacerun: yes">&nbsp; </span>For example, the
disk controller may need a little memory for buffers and each of the user-level
processes will need memory for “virtual pages.”<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>The area of memory called
the frame region will be viewed as a sequence of “frames”.<span
style="mso-spacerun: yes">&nbsp; </span>Each frame will be the same size and we
will have a fixed number of frames.<span style="mso-spacerun: yes">&nbsp;
</span>For concreteness, here are some constants from <b style='mso-bidi-font-weight:
normal'>Kernel.h</b>.<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style="mso-spacerun: yes">&nbsp; </span>PAGE_SIZE = 8192<span
style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>-- in hex: 0x00002000<o:p></o:p></span></p>

<p class=MsoBodyText2><span style='font-size:10.0pt;font-family:Courier'><span
style="mso-spacerun: yes">&nbsp; </span>PHYSICAL_ADDRESS_OF_FIRST_PAGE_FRAME =
1048576 -- in hex: 0x00100000<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style="mso-spacerun: yes">&nbsp; </span>NUMBER_OF_PHYSICAL_PAGE_FRAMES =
512<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>-- in
hex: 0x00000200<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>This results in a frame region
of 4 MB, so our kernel would fit into a 5 MByte memory.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>The frame size and the page
size are the same, namely 8K.<span style="mso-spacerun: yes">&nbsp; </span>In
later projects, each frame will hold a page of memory.<span
style="mso-spacerun: yes">&nbsp; </span>For now, we can think of each frame as
a resource that must be managed.<span style="mso-spacerun: yes">&nbsp;
</span>We will not really do anything with the frames.<span
style="mso-spacerun: yes">&nbsp; </span>This is similar to the dice in the
gaming parlor and the forks for the philosophers... we were concerned with
allocating them to threads, but didn’t really use them in any way.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Each frame is a resource,
like the dice of the game parlor, or the philosophers’ forks.<span
style="mso-spacerun: yes">&nbsp; </span>From time to time, a thread will
request some frames; the <b style='mso-bidi-font-weight:normal'>frameManager</b>
will either be able to satisfy the request, or the requesting thread will have
to wait until the request can be satisfied.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>For the purposes of testing
our code, we will work with a smaller frame region of only a few frames.<span
style="mso-spacerun: yes">&nbsp; </span>This will cause more contention for
resources and stress our concurrency control a little more.<span
style="mso-spacerun: yes">&nbsp; </span>(For later projects, we can restore
this constant to the larger value.)<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style="mso-spacerun: yes">&nbsp; </span>NUMBER_OF_PHYSICAL_PAGE_FRAMES =
27<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>-- For
testing only<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Here is the definition of
the <b style='mso-bidi-font-weight:normal'>FrameManager</b> class:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style="mso-spacerun: yes">&nbsp; </span><u>class</u> FrameManager<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span><u>superclass</u> Object<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span><u>fields<o:p></o:p></u></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>framesInUse:
BitMap<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>numberFreeFrames: <u>int</u><o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-size:10.0pt;
font-family:Courier'><span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>frameManagerLock: Mutex<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>newFramesAvailable: Condition<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span><u>methods<o:p></o:p></u></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Init ()<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Print ()<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>GetAFrame () <u>returns</u>
<u>int</u><span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>-- returns
addr of frame<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>GetNewFrames
(aPageTable: <u>ptr</u> <u>to</u> AddrSpace, numFramesNeeded: <u>int</u>)<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>ReturnAllFrames
(aPageTable: <u>ptr</u> <u>to</u> AddrSpace)<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style="mso-spacerun: yes">&nbsp; </span><u>endClass<o:p></o:p></u></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>There will be exactly one <b
style='mso-bidi-font-weight:normal'>frameManager</b> object, created at kernel
start-up time.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>frameManager = <u>new</u>
FrameManager<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>frameManager.Init ()<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>With frames (unlike the <b
style='mso-bidi-font-weight:normal'>ProcessControlBlocks</b>) there is no
object to represent each resource.<span style="mso-spacerun: yes">&nbsp;
</span>So to keep track of which frames are free, we will use the <b
style='mso-bidi-font-weight:normal'>BitMap</b> package.<span
style="mso-spacerun: yes">&nbsp; </span>Take a look at it.<span
style="mso-spacerun: yes">&nbsp; </span>Basically, the <b style='mso-bidi-font-weight:
normal'>BitMap</b> class gives us a way to deal with long strings of bits.<span
style="mso-spacerun: yes">&nbsp; </span>We can do things like (1) set a bit,
(2) clear a bit, and (3) test a bit.<span style="mso-spacerun: yes">&nbsp;
</span>We will use a long bit string to tell which frames are in use and which
are free; this is the <b style='mso-bidi-font-weight:normal'>framesInUse</b>
field.<span style="mso-spacerun: yes">&nbsp; </span>For each frame, there is a
bit.<span style="mso-spacerun: yes">&nbsp; </span>If the bit is 1 (i.e., is
“set”) then the frame is in use; if the bit is 0 (i.e., is “clear”) then the
frame is free.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>The <b style='mso-bidi-font-weight:
normal'>frameManager</b> should be organized as a “Monitor class.”<span
style="mso-spacerun: yes">&nbsp; </span>The <b style='mso-bidi-font-weight:
normal'>frameManagerLock</b> is used to make sure only one method at a time is
executing in the <b style='mso-bidi-font-weight:normal'>FrameManager</b> code.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>We have provided the code
for the <b style='mso-bidi-font-weight:normal'>Init</b>, <b style='mso-bidi-font-weight:
normal'>Print</b>, and <b style='mso-bidi-font-weight:normal'>GetAFrame</b> methods;
you’ll need to implement <b style='mso-bidi-font-weight:normal'>GetNewFrames</b>,
, and <b style='mso-bidi-font-weight:normal'>ReturnAllFrames</b>.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>The method <b
style='mso-bidi-font-weight:normal'>GetANewFrame</b> allocates one frame
(waiting until at least one is available) and returns the address of the
frame.<span style="mso-spacerun: yes">&nbsp; </span>(Since there is never a
need to return frames one at a time, there is no “ReturnOneFrame” method.)<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>When the frames are gotten,
the <b style='mso-bidi-font-weight:normal'>GetNewFrames</b> method needs to
make a note of which frames have been allocated.<span style="mso-spacerun:
yes">&nbsp; </span>It does this by storing the address of each frame it
allocates (the address of the first byte in each frame) into an <b
style='mso-bidi-font-weight:normal'>AddrSpace </b>object.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>An <b style='mso-bidi-font-weight:
normal'>AddrSpace</b> object is used to represent a virtual address space and
to tell where in physical memory the virtual pages are actually located.<span
style="mso-spacerun: yes">&nbsp; </span>For example, for a virtual address
space with 10 pages, the <b style='mso-bidi-font-weight:normal'>AddrSpace</b>
object will contain an ordered list of 10 physical memory addresses.<span
style="mso-spacerun: yes">&nbsp; </span>These are the addresses of the 10
“frames” holding the 10 pages in the virtual address space.<span
style="mso-spacerun: yes">&nbsp; </span>However, the <b style='mso-bidi-font-weight:
normal'>AddrSpace</b> object contains more information.<span
style="mso-spacerun: yes">&nbsp; </span>For each page, it also contains
information about whether the page has been modified, whether the page is
read-only or writable, etc.<span style="mso-spacerun: yes">&nbsp; </span>The
information in an <b style='mso-bidi-font-weight:normal'>AddrSpace</b> object
is stored in exactly the format required by the CPU’s memory management
hardware.<span style="mso-spacerun: yes">&nbsp; </span>In later projects, this
will allow us to use the <b style='mso-bidi-font-weight:normal'>AddrSpace</b>
object as the current page table for a running user-level process.<span
style="mso-spacerun: yes">&nbsp; </span>At that time, when we switch to a
user-level process, we’ll have to tell the CPU which <b style='mso-bidi-font-weight:
normal'>AddrSpace</b> object to use for its page table.<span
style="mso-spacerun: yes">&nbsp; </span>In addition to looking over the code in
<b style='mso-bidi-font-weight:normal'>AddrSpace</b>, you may want to review
the BLITZ architecture manual’s discussion of page tables.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'>The
code in method<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>GetNewFrames
(aPageTable: <u>ptr</u> <u>to</u> AddrSpace, numFramesNeeded: <u>int</u>)<o:p></o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoNormal><span style='font-family:Times'>needs to do the following:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>(1) Acquire the frame
manager lock.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>(2) Wait on <b
style='mso-bidi-font-weight:normal'>newFramesAvailable</b> until there are
enough free frames to satisfy the request.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>(3) Do a loop for each of
the frames<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-size:10.0pt;
font-family:Courier'><span style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>for
i = 0 to numFramesNeeded-1<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><span style='mso-tab-count:
1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>(a)
determine which frame is free (find and set a bit in the <b style='mso-bidi-font-weight:
normal'>framesInUse</b> BitMap)<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><span style='mso-tab-count:
1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>(b)
figure out the address of the free frame<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><span style='mso-tab-count:
1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>(c)
execute the following<o:p></o:p></span></p>

<p class=MsoBodyText3><span style='font-family:Courier'><span style='mso-tab-count:
2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>aPageTable.SetFrameAddr
(i, frameAddr)<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><span style='mso-tab-count:
1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>to store the
address of the frame which has been allocated<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>(4) Adjust the number of
free frames<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>(5) Set <b style='mso-bidi-font-weight:
normal'>aPageTable.numberOfPages</b> to the number of frames allocated.<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'>(6)
Unlock the frame manager<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>The code in method<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoBodyText3><span style='font-family:Courier'><span style='mso-tab-count:
1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>ReturnAllFrames (aPageTable: ptr to
AddrSpace)<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>needs to do more or less the
opposite.<span style="mso-spacerun: yes">&nbsp; </span>It can look at <b
style='mso-bidi-font-weight:normal'>aPageTable.numberOfPages</b> to see how
many are being returned.<span style="mso-spacerun: yes">&nbsp; </span>It can
then go through the page table and see which frames it possessed.<span
style="mso-spacerun: yes">&nbsp; </span>For each, it can clear the bit.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>for i = 0 to
numFramesReturned-1<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style="mso-spacerun: yes">&nbsp; </span>frameAddr = aPageTable.ExtractFrameAddr
(i)<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style="mso-spacerun: yes">&nbsp; </span>bitNumber = ...frameAddr...<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style="mso-spacerun: yes">&nbsp; </span>framesInUse.ClearBit(bitNumber )<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>endFor<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>It will also need to adjust
the number of free frames and “notify” any waiting threads that more frames
have become available.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>You’ll need to do a <b
style='mso-bidi-font-weight:normal'>Broadcast</b>, because a <b
style='mso-bidi-font-weight:normal'>Signal</b> will only wake up one
thread.<span style="mso-spacerun: yes">&nbsp; </span>The thread that gets
awakened may not have enough free frames to complete, but other waiting threads
may be able to proceed.<span style="mso-spacerun: yes">&nbsp; </span>A
broadcast should be adequate, but perhaps after carefully studying the Game
Parlor problem, you will find a more elegant approach which wakes up only a
single thread.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Also note that there is a
possibility of starvation here.<span style="mso-spacerun: yes">&nbsp; </span>It
is possible that one large process will be waiting for a lot of frames (e.g.,
100 frames).<span style="mso-spacerun: yes">&nbsp; </span>Perhaps there are
many small processes which free a few frames here and there, but there are
always other small processes that grab those frames.<span style="mso-spacerun:
yes">&nbsp; </span>Since there are never more than a few free frames at a time,
the big process will get starved.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>This particular scenario for
starvation, where processes are competing for frames) is a very real danger in
an OS and a “real” OS would need to ensure that starvation could not
happen.<span style="mso-spacerun: yes">&nbsp; </span>However, in our situation,
it is acceptable to provide a solution that risks starvation.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Do not modify the code for
the <b style='mso-bidi-font-weight:normal'>AddrSpace</b> class.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<h3><o:p><span style='text-decoration:none'>&nbsp;</span></o:p></h3>

<h3><o:p><span style='text-decoration:none'>&nbsp;</span></o:p></h3>

<h3>Task 4:<span style="mso-spacerun: yes">&nbsp; </span>Change Condition
Variables to Hoare Semantics</h3>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>The code we have given you
for the <b style='mso-bidi-font-weight:normal'>Signal</b> method in the <b
style='mso-bidi-font-weight:normal'>Condition</b> class uses MESA
semantics.<span style="mso-spacerun: yes">&nbsp; </span>Change the
implementation so that it uses Hoare semantics.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>With MESA semantics, you
tend to see code like this in monitors:<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>NewResourcesHaveBecomeAvail:
Condition<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><i
style='mso-bidi-font-style:normal'><u>In method A:<o:p></o:p></u></i></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>...<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>numberAvail =
numberAvail + 1<o:p></o:p></span></p>

<p class=MsoBodyText3><span style='font-family:Courier'><span style='mso-tab-count:
2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>NewResourcesHaveBecomeAvail.Signal()<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>...<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><i
style='mso-bidi-font-style:normal'><u>In method B:<o:p></o:p></u></i></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>...<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>while
(numberAvail == 0)<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;
</span>NewResourcesHaveBecomeAvail.Wait()<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>endWhile<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style='mso-tab-count:2'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>...<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>The code in method B
contains a <b style='mso-bidi-font-weight:normal'>while</b> loop because there
is a possibility that some other thread has snuck in between the <b
style='mso-bidi-font-weight:normal'>Signal</b> and the <b style='mso-bidi-font-weight:
normal'>Wait</b>.<span style="mso-spacerun: yes">&nbsp; </span>When method A
increments <b style='mso-bidi-font-weight:normal'>numberAvail</b>, the
condition (“resources are now available for some other thread to use”) has been
made true.<span style="mso-spacerun: yes">&nbsp; </span>Method A invokes <b
style='mso-bidi-font-weight:normal'>Signal</b> to wake up some thread that is
waiting for resources.<span style="mso-spacerun: yes">&nbsp; </span>The problem
is that some other thread may have run between the <b style='mso-bidi-font-weight:
normal'>Signal</b> and the reawakening of the <b style='mso-bidi-font-weight:
normal'>Wait</b> in method B.<span style="mso-spacerun: yes">&nbsp;
</span>Other threads may have come in and grabbed all the resources.<span
style="mso-spacerun: yes">&nbsp; </span>So when the waiting thread is
reawakened, it must always re-check for resources (or more generally, it must
check to ensure the condition is still true.)<span style="mso-spacerun:
yes">&nbsp; </span>Unfortunately, the condition may have changed back to false
(i.e., no resources are available), so the thread will have to wait some more.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>And with MESA semantics,
starvation becomes a bigger problem.<span style="mso-spacerun: yes">&nbsp;
</span>What if the thread waits, wakes up, and then goes back to sleep, over
and over.<span style="mso-spacerun: yes">&nbsp; </span>Each time a <b
style='mso-bidi-font-weight:normal'>Signal</b> occurs, some other thread just
happens to get in first and steal the resource.<span style="mso-spacerun:
yes">&nbsp; </span>Then the unlucky thread keeps waking up, testing, and going
back into a waiting sleep.<span style="mso-spacerun: yes">&nbsp; </span>This is
a very real possibility if you have three threads and they are scheduled in
round-robin fashion.<span style="mso-spacerun: yes">&nbsp; </span>Thread A runs
and signals thread C.<span style="mso-spacerun: yes">&nbsp; </span>Thread B
runs and takes the resource.<span style="mso-spacerun: yes">&nbsp;
</span>Thread C runs, finds the condition is false and goes back to sleep.<span
style="mso-spacerun: yes">&nbsp; </span>Then thread A runs again, and so on.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>With Hoare semantics, the
thread needing the resources can use code like this:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>...<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>if (numberAvail
== 0)<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;
</span>NewResourcesHaveBecomeAvail.Wait()<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>endIf<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:Courier'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>...<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Once the thread is
reawakened, it can be sure that nothing has happened between the <b
style='mso-bidi-font-weight:normal'>Signal</b> and it; it can be sure that no
other thread has gotten into the monitor.<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Starvation is easier to
ensure against, too.<span style="mso-spacerun: yes">&nbsp; </span>If a thread
needs a resource, it waits.<span style="mso-spacerun: yes">&nbsp; </span>We
assume the waiting queue is FIFO, so that the waiting thread will eventually be
awakened.<span style="mso-spacerun: yes">&nbsp; </span>And when it wakes, it
will proceed forward, without looping.<span style="mso-spacerun: yes">&nbsp;
</span>Therefore, each <b style='mso-bidi-font-weight:normal'>Signal</b> wakes
one thread which proceeds and, given enough <b style='mso-bidi-font-weight:
normal'>Signals</b> to awaken any thread who went to sleep first, the thread in
question will eventually get awakened.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>(Of course
starvation-related bugs are still possible!<span style="mso-spacerun:
yes">&nbsp; </span>For example, it might be that the code fails to <b
style='mso-bidi-font-weight:normal'>Signal</b> the condition enough times,
leaving some thread waiting forever.<span style="mso-spacerun: yes">&nbsp;
</span>The contribution of the monitor concept is to make it easier to write
bug-free code, not to make it impossible to create bugs!)<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>All further design choices
are up to you.<span style="mso-spacerun: yes">&nbsp; </span>We are not
providing any testing code at all; you’ll have to figure out how to test your
code.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>If you have time, you may go
back to the previous tasks to incorporate your Hoare Semantics code in their
solutions, but remember to complete the above tasks <u>before</u> starting on
the Hoare Semantics task.<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<h3>Do not modify...</h3>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Do not modify any files
except:<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>Kernel.h<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>Kernel.c<o:p></o:p></span></b></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Do not create global
variables (except for testing purposes).<span style="mso-spacerun: yes">&nbsp;
</span>Do not modify the methods we have provided.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<h3>Policy Concerning Project Deadlines</h3>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>The previous projects were
designed to get you up to speed and to let you know how much time the
programming portion of this class will take.<span style="mso-spacerun:
yes">&nbsp; </span>Some of the tasks were intentionally quite difficult, in
order to challenge the ambitious students and to motivate all students to pay
close attention to the subtleties of concurrency problems and their
solutions.<span style="mso-spacerun: yes">&nbsp; </span>The previous projects
were independent, in the sense your solution code did not need to be 100%
correct in order to continue with the BLITZ kernel project.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Things change with this
project.<span style="mso-spacerun: yes">&nbsp; </span>Buggy code in this
project is not acceptable and will make it impossible to complete the future
projects.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>In particular, you must
complete tasks 1, 2 and 3 in this project before you can begin the next
project.<span style="mso-spacerun: yes">&nbsp; </span>You must get your code
working and pass the test programs before going on, unlike the previous
projects in which successful completion was not a barrier to moving on.<span
style="mso-spacerun: yes">&nbsp; </span>However, task 4 (the Hoare Semantics
task) is somewhat optional, in the sense that this code will not be needed in
future projects.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>If you are able to complete
tasks 1, 2 and 3 on time, then hand in whatever you were able to achieve on
task 4 and move on to the next project.<span style="mso-spacerun: yes">&nbsp;
</span>The Hoare Semantics task is provided as an extra challenge; if you don’t
have time for it, then do not allow yourself to fall behind on the next project.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>If you are unable to
complete tasks 1, 2 and 3, keep working on them until your code works 100%
correctly.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Students who have difficulty
completing the projects on time will start to fall behind.<span
style="mso-spacerun: yes">&nbsp; </span>Perhaps such a student can worker a
little harder to catch up on the next project and can still get the entire
kernel finished on time.<span style="mso-spacerun: yes">&nbsp; </span>Or
perhaps the student will remain behind schedule and will be unable to complete
one or more of the later projects.<span style="mso-spacerun: yes">&nbsp;
</span>Such a student will not be able to get the completed kernel working by
the end of the class.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>We recommend that your
instructor base grades, from this project onward, on program “style” only.<span
style="mso-spacerun: yes">&nbsp; </span>We recommend they simply not accept any
programs that fail to work correctly, as defined by our test suite.<span
style="mso-spacerun: yes">&nbsp; </span>If there are problems with the output,
the student must finish / fix the code and re-submit it when it is working
correctly, regardless of how long it takes.<span style="mso-spacerun:
yes">&nbsp; </span>The final course grade will then be determined in part by
how many of the projects the student was able to complete before the end of the
course.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Your instructor may alter
this policy.<span style="mso-spacerun: yes">&nbsp; </span>Of course, your
instructor’s policy takes precedence over what is written here.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<h3>What to Hand In</h3>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Please submit hardcopy of
your output and hardcopy your new versions of the following files:<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>Kernel.h<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>Kernel.c<o:p></o:p></span></b></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-pagination:none;tab-stops:28.0pt 56.0pt 84.0pt 112.0pt 140.0pt 168.0pt 196.0pt 224.0pt 3.5in 280.0pt 308.0pt 336.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-family:Times;
color:black'>For both files, please take a colored pen and circle <i
style='mso-bidi-font-style:normal'><u>exactly</u></i> those parts you have
added or changed.<o:p></o:p></span></p>

<p class=MsoNormal style='mso-pagination:none;tab-stops:28.0pt 56.0pt 84.0pt 112.0pt 140.0pt 168.0pt 196.0pt 224.0pt 3.5in 280.0pt 308.0pt 336.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-family:Times;
color:black'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-pagination:none;tab-stops:28.0pt 56.0pt 84.0pt 112.0pt 140.0pt 168.0pt 196.0pt 224.0pt 3.5in 280.0pt 308.0pt 336.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-family:Times;
color:black'>Please submit all of <b style='mso-bidi-font-weight:normal'>Kernel.h</b>.<o:p></o:p></span></p>

<p class=MsoNormal style='mso-pagination:none;tab-stops:28.0pt 56.0pt 84.0pt 112.0pt 140.0pt 168.0pt 196.0pt 224.0pt 3.5in 280.0pt 308.0pt 336.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-family:Times;
color:black'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-pagination:none;tab-stops:28.0pt 56.0pt 84.0pt 112.0pt 140.0pt 168.0pt 196.0pt 224.0pt 3.5in 280.0pt 308.0pt 336.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-family:Times;
color:black'>For <b style='mso-bidi-font-weight:normal'>Kernel.c</b>, please
submit only the pages that have something circled.<span style="mso-spacerun:
yes">&nbsp; </span>In other words, please discard all pages that contain ONLY
material that we are distributing.<span style="mso-spacerun: yes">&nbsp;
</span>Please keep the remaining pages in order.<o:p></o:p></span></p>

<p class=MsoNormal style='mso-pagination:none;tab-stops:28.0pt 56.0pt 84.0pt 112.0pt 140.0pt 168.0pt 196.0pt 224.0pt 3.5in 280.0pt 308.0pt 336.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-family:Times;
color:black'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-pagination:none;tab-stops:28.0pt 56.0pt 84.0pt 112.0pt 140.0pt 168.0pt 196.0pt 224.0pt 3.5in 280.0pt 308.0pt 336.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-family:Times;
color:black'>Also, if you have modified any part of a method or function,
please hand in the entire function, so there is a little context surrounding
your code modifications.<o:p></o:p></span></p>

<p class=MsoNormal style='mso-pagination:none;tab-stops:28.0pt 56.0pt 84.0pt 112.0pt 140.0pt 168.0pt 196.0pt 224.0pt 3.5in 280.0pt 308.0pt 336.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-family:Times;
color:black'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-pagination:none;tab-stops:28.0pt 56.0pt 84.0pt 112.0pt 140.0pt 168.0pt 196.0pt 224.0pt 3.5in 280.0pt 308.0pt 336.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-family:Times;
color:black'>As a second option, which will save on wasted paper, you may
perform the deletions with an editor, instead of discarding physical
pages.<span style="mso-spacerun: yes">&nbsp; </span>You can cut out large
sections of code, but please indicate where material has been clipped out.<span
style="mso-spacerun: yes">&nbsp; </span>Please replaced deleted material with a
line like this<o:p></o:p></span></p>

<p class=MsoNormal style='mso-pagination:none;tab-stops:28.0pt 56.0pt 84.0pt 112.0pt 140.0pt 168.0pt 196.0pt 224.0pt 3.5in 280.0pt 308.0pt 336.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-family:Times;
color:black'><o:p>&nbsp;</o:p></span></p>

<p class=MsoHeading7><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>XXXXXXXXXXXXXXXXXXX<span
style="mso-spacerun: yes">&nbsp; </span>skipping<span style="mso-spacerun:
yes">&nbsp; </span>XXXXXXXXXXXXXXXXXXX</p>

<p class=MsoNormal style='mso-pagination:none;tab-stops:28.0pt 56.0pt 84.0pt 112.0pt 140.0pt 168.0pt 196.0pt 224.0pt 3.5in 280.0pt 308.0pt 336.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-family:Times;
color:black'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-pagination:none;tab-stops:28.0pt 56.0pt 84.0pt 112.0pt 140.0pt 168.0pt 196.0pt 224.0pt 3.5in 280.0pt 308.0pt 336.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-family:Times;
color:black'>to indicate which lines were removed.<span style="mso-spacerun:
yes">&nbsp; </span>But please remember to circle your material with a colored
pen.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>In the course of testing,
you will probably want to modify <b style='mso-bidi-font-weight:normal'>Main.c</b>;
but please hand in output using our version.<span style="mso-spacerun:
yes">&nbsp; </span>In other words, after you are done testing, make a new run
using our version of the <b style='mso-bidi-font-weight:normal'>Main</b>
package and hand in the output it produces.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>For the Hoare Semantics
task, we are not providing any testing material; you’ll have to devise some
tests on your own.<span style="mso-spacerun: yes">&nbsp; </span>Please hand in
something showing how you have tested your code.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Please print your output in
a fixed-width font.<span style="mso-spacerun: yes">&nbsp; </span>We <i
style='mso-bidi-font-style:normal'><u>don’t</u></i> want to see output that
looks like this:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<div style='mso-element:para-border-div;border:solid windowtext 1.0pt;
mso-border-alt:solid windowtext .5pt;padding:1.0pt 4.0pt 1.0pt 5.0pt'>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0in;mso-padding-alt:1.0pt 4.0pt 1.0pt 5.0pt'><span style='font-family:
Times'><span style="mso-spacerun: yes">&nbsp; </span>2 <span
style="mso-spacerun: yes">&nbsp;</span>ProcessControlBlock<span
style="mso-spacerun: yes">&nbsp;&nbsp; </span>pid=2, status=ACTIVE,
parentsPid=0, exitStatus=0, name=&quot;----------&quot;, addrSpace=<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0in;mso-padding-alt:1.0pt 4.0pt 1.0pt 5.0pt'><span style='font-family:
Times'><span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>addr<span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>entry<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Logical<span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span>Physical<span
style="mso-spacerun: yes">&nbsp;&nbsp; </span>Undefined Bits<span
style="mso-spacerun: yes">&nbsp; </span>Dirty<span style="mso-spacerun:
yes">&nbsp; </span>Referenced<span style="mso-spacerun: yes">&nbsp;
</span>Writeable<span style="mso-spacerun: yes">&nbsp; </span>Valid<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0in;mso-padding-alt:1.0pt 4.0pt 1.0pt 5.0pt'><span style='font-family:
Times'><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;
</span>==========<span style="mso-spacerun: yes">&nbsp;&nbsp;
</span>==========<span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;
</span>========== <span style="mso-spacerun: yes">&nbsp;</span>==========<span
style="mso-spacerun: yes">&nbsp; </span>==============<span
style="mso-spacerun: yes">&nbsp; </span>=====<span style="mso-spacerun:
yes">&nbsp; </span>==========<span style="mso-spacerun: yes">&nbsp;
</span>=========<span style="mso-spacerun: yes">&nbsp; </span>=====<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0in;mso-padding-alt:1.0pt 4.0pt 1.0pt 5.0pt'><span style='font-family:
Times'><span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;
</span>0x00093174:<span style="mso-spacerun: yes">&nbsp; </span>0x00100003<span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp; </span>0x00000000<span
style="mso-spacerun: yes">&nbsp; </span>0x00100000<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>YES<span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>YES<o:p></o:p></span></p>

</div>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:Times'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoNormal><span style='font-family:Times'>We prefer to see something
more like this.<span style="mso-spacerun: yes">&nbsp; </span>Even though the
long lines wrap around, at least things still line up properly.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<div style='mso-element:para-border-div;border:solid windowtext 1.0pt;
mso-border-alt:solid windowtext .5pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0in;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='font-size:
9.0pt;mso-bidi-font-size:10.0pt;font-family:"Courier New"'><span
style="mso-spacerun: yes">&nbsp; </span>2<span style="mso-spacerun: yes">&nbsp;
</span>ProcessControlBlock<span style="mso-spacerun: yes">&nbsp;&nbsp;
</span>pid=2, status=ACTIVE, parentsPid=0, exitStatus=0,
name=&quot;----------&quot;, addrSpace=<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0in;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='font-size:
9.0pt;mso-bidi-font-size:10.0pt;font-family:"Courier New"'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>addr<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>entry<span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>Logical<span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;
</span>Physical<span style="mso-spacerun: yes">&nbsp;&nbsp; </span>Undefined
Bits<span style="mso-spacerun: yes">&nbsp; </span>Dirty<span
style="mso-spacerun: yes">&nbsp; </span>Referenced<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0in;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='font-size:
9.0pt;mso-bidi-font-size:10.0pt;font-family:"Courier New"'><span
style="mso-spacerun: yes">&nbsp; </span>Writeable<span style="mso-spacerun:
yes">&nbsp; </span>Valid<o:p></o:p></span></p>

<p class=MsoBodyText3 style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0in;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='font-size:
9.0pt;mso-bidi-font-size:10.0pt'><span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp; </span>==========<span style="mso-spacerun:
yes">&nbsp;&nbsp; </span>==========<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp; </span>==========<span style="mso-spacerun:
yes">&nbsp; </span>==========<span style="mso-spacerun: yes">&nbsp;
</span>==============<span style="mso-spacerun: yes">&nbsp; </span>=====<span
style="mso-spacerun: yes">&nbsp; </span>==========<o:p></o:p></span></p>

<p class=MsoBodyText3 style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0in;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='font-size:
9.0pt;mso-bidi-font-size:10.0pt'><span style="mso-spacerun: yes">&nbsp;
</span>=========<span style="mso-spacerun: yes">&nbsp; </span>=====<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0in;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='font-size:
9.0pt;mso-bidi-font-size:10.0pt;font-family:"Courier New"'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp; </span>0x00093174:<span
style="mso-spacerun: yes">&nbsp; </span>0x00100003<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp; </span>0x00000000<span style="mso-spacerun:
yes">&nbsp; </span>0x00100000<span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-alt:solid windowtext .5pt;
padding:0in;mso-padding-alt:1.0pt 4.0pt 1.0pt 4.0pt'><span style='font-size:
9.0pt;mso-bidi-font-size:10.0pt;font-family:"Courier New"'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp; </span>YES<span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>YES<o:p></o:p></span></p>

</div>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>In LARGE BLOCK LETTERS,
write your full name on the first page.<span style="mso-spacerun: yes">&nbsp;
</span>PLEASE STAPLE ALL PAGES!<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<h3>Sample Output</h3>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Here is the output produced
by our solution code.<span style="mso-spacerun: yes">&nbsp; </span>You should
see something similar, if your program works correctly:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<div style='mso-element:para-border-div;border:solid windowtext 1.0pt;
border-bottom:none;padding:1.0pt 5.0pt 0in 5.0pt'>

<p class=MsoNormal style='border:none;mso-border-top-alt:solid windowtext 1.0pt;
mso-border-left-alt:solid windowtext 1.0pt;mso-border-right-alt:solid windowtext 1.0pt;
padding:0in;mso-padding-alt:1.0pt 5.0pt 0in 5.0pt'><span style='font-size:8.0pt;
mso-bidi-font-size:10.0pt;font-family:Courier'>====================<span
style="mso-spacerun: yes">&nbsp; </span>KPL PROGRAM STARTING<span
style="mso-spacerun: yes">&nbsp; </span>====================<o:p></o:p></span></p>

</div>

<div style='mso-element:para-border-div;border-top:none;border-left:solid windowtext 1.0pt;
border-bottom:none;border-right:solid windowtext 1.0pt;padding:0in 5.0pt 0in 5.0pt'>

<p class=MsoNormal style='border:none;mso-border-left-alt:solid windowtext 1.0pt;
mso-border-right-alt:solid windowtext 1.0pt;padding:0in;mso-padding-alt:0in 5.0pt 0in 5.0pt'><span
style='font-size:8.0pt;mso-bidi-font-size:10.0pt;font-family:Courier'>Initializing
Thread Scheduler...<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-left-alt:solid windowtext 1.0pt;
mso-border-right-alt:solid windowtext 1.0pt;padding:0in;mso-padding-alt:0in 5.0pt 0in 5.0pt'><span
style='font-size:8.0pt;mso-bidi-font-size:10.0pt;font-family:Courier'>Initializing
Process Manager...<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-left-alt:solid windowtext 1.0pt;
mso-border-right-alt:solid windowtext 1.0pt;padding:0in;mso-padding-alt:0in 5.0pt 0in 5.0pt'><span
style='font-size:8.0pt;mso-bidi-font-size:10.0pt;font-family:Courier'>Initializing
Thread Manager...<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-left-alt:solid windowtext 1.0pt;
mso-border-right-alt:solid windowtext 1.0pt;padding:0in;mso-padding-alt:0in 5.0pt 0in 5.0pt'><span
style='font-size:8.0pt;mso-bidi-font-size:10.0pt;font-family:Courier'>Initializing
Frame Manager...<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-left-alt:solid windowtext 1.0pt;
mso-border-right-alt:solid windowtext 1.0pt;padding:0in;mso-padding-alt:0in 5.0pt 0in 5.0pt'><span
style='font-size:8.0pt;mso-bidi-font-size:10.0pt;font-family:Courier'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-left-alt:solid windowtext 1.0pt;
mso-border-right-alt:solid windowtext 1.0pt;padding:0in;mso-padding-alt:0in 5.0pt 0in 5.0pt'><span
style='font-size:8.0pt;mso-bidi-font-size:10.0pt;font-family:Courier'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-left-alt:solid windowtext 1.0pt;
mso-border-right-alt:solid windowtext 1.0pt;padding:0in;mso-padding-alt:0in 5.0pt 0in 5.0pt'><span
style='font-size:8.0pt;mso-bidi-font-size:10.0pt;font-family:Courier'>*****<span
style="mso-spacerun: yes">&nbsp; </span>THREAD-MANAGER TEST<span
style="mso-spacerun: yes">&nbsp; </span>*****<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-left-alt:solid windowtext 1.0pt;
mso-border-right-alt:solid windowtext 1.0pt;padding:0in;mso-padding-alt:0in 5.0pt 0in 5.0pt'><span
style='font-size:8.0pt;mso-bidi-font-size:10.0pt;font-family:Courier'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-left-alt:solid windowtext 1.0pt;
mso-border-right-alt:solid windowtext 1.0pt;padding:0in;mso-padding-alt:0in 5.0pt 0in 5.0pt'><span
style='font-size:8.0pt;mso-bidi-font-size:10.0pt;font-family:Courier'>123.4..1562.7839.1041112.13141.15....16....3295.17.8184..76.192010.111315...14..12..161..9.173188..7.19.52.20....14410.12.91113...616...15571..18320....122..17..10..9161114586157.......4.123.1.18217.13..20...9.19.516.1411.2..8..110.15.64.12.1618.9.7.132019..11.3.15..14.812..61.9...2.2018..10165.15.78..9...4.112013.3..191815....714...17.11.151216.194...18.9.102076..11.12..15...14.84191013..93..2...1511518..8.714..9.616.19..1..2015...813.42.1210.9......520.4.2.181116.14915..4.2.1.1117..5.8.1018.15.2.4.14.9.11..1.56.8.2.15..4.1410..93..18.2013.2.15..7.17...1210914.8.20.2.....17515123.14.9.20..16.819.12.5.3.15.1.16.14.20.8.3..513.12.15.18..1.8..209.193.5.6.18.7.8....20.14153.511.12.4.7.8.3.14.15.9.11.12...1518.16.3..14..1117.12..4.5..1710..14.26.1.7..123.16.8.19.17.6.20.2.10..12.165.3.19.1.17..4...6.8.1220216.19..7.13.13.6.11.19.16..20.4.2.1.7..13.6.11.17.19..16.14.7..1....18....1013619.16.1711.4.7.20..13.18.16.19.10.6.17..411.7..13.18.19...17.10.6..7.13..1918.17.10.6.....131817.19.106.13..17...10.13.17..13..<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-left-alt:solid windowtext 1.0pt;
mso-border-right-alt:solid windowtext 1.0pt;padding:0in;mso-padding-alt:0in 5.0pt 0in 5.0pt'><span
style='font-size:8.0pt;mso-bidi-font-size:10.0pt;font-family:Courier'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-left-alt:solid windowtext 1.0pt;
mso-border-right-alt:solid windowtext 1.0pt;padding:0in;mso-padding-alt:0in 5.0pt 0in 5.0pt'><span
style='font-size:8.0pt;mso-bidi-font-size:10.0pt;font-family:Courier'>*****
THREAD-MANAGER TEST COMPLETED SUCCESSFULLY *****<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-left-alt:solid windowtext 1.0pt;
mso-border-right-alt:solid windowtext 1.0pt;padding:0in;mso-padding-alt:0in 5.0pt 0in 5.0pt'><span
style='font-size:8.0pt;mso-bidi-font-size:10.0pt;font-family:Courier'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-left-alt:solid windowtext 1.0pt;
mso-border-right-alt:solid windowtext 1.0pt;padding:0in;mso-padding-alt:0in 5.0pt 0in 5.0pt'><span
style='font-size:8.0pt;mso-bidi-font-size:10.0pt;font-family:Courier'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-left-alt:solid windowtext 1.0pt;
mso-border-right-alt:solid windowtext 1.0pt;padding:0in;mso-padding-alt:0in 5.0pt 0in 5.0pt'><span
style='font-size:8.0pt;mso-bidi-font-size:10.0pt;font-family:Courier'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-left-alt:solid windowtext 1.0pt;
mso-border-right-alt:solid windowtext 1.0pt;padding:0in;mso-padding-alt:0in 5.0pt 0in 5.0pt'><span
style='font-size:8.0pt;mso-bidi-font-size:10.0pt;font-family:Courier'>*****<span
style="mso-spacerun: yes">&nbsp; </span>PROCESS-MANAGER TEST<span
style="mso-spacerun: yes">&nbsp; </span>*****<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-left-alt:solid windowtext 1.0pt;
mso-border-right-alt:solid windowtext 1.0pt;padding:0in;mso-padding-alt:0in 5.0pt 0in 5.0pt'><span
style='font-size:8.0pt;mso-bidi-font-size:10.0pt;font-family:Courier'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-left-alt:solid windowtext 1.0pt;
mso-border-right-alt:solid windowtext 1.0pt;padding:0in;mso-padding-alt:0in 5.0pt 0in 5.0pt'><span
style='font-size:8.0pt;mso-bidi-font-size:10.0pt;font-family:Courier'>123.4..1562783.9.104...1...11.738.12132149.156.5.1016.17..184...19..201.11138.714.12.3....5.26.17164.3.20.19..1812..629.14..1015...17.137..16.84.1820.1912...116.15.14.....572.3.89.116....10417513..15.12.1814...23..19.716.1204.1511...14..5..9.6131237..162....18.10.1718..5..1119.61620....9184..13.17..14108....612711.159..2..11317....20.11..16..7146.119515.10.4.168...714..11.92.12.1..181720..14..6319...1219..7.168...2513...411.15..129.181.14..19.32.4..6.15.128.16..19.1410.5.20.9.7..46.16.11.3.13.17.14.9.8.7.1.16.2..5..192010.9.7..164.1.11...31317.5.9.7.6.12...19.13.11.20161.5.7.12.19.3.6..1110..113.5.12..719.11.6.2.3.20.16.12.5.19.11.6..207.2..9.1416.5.19.15.6.11.20.2.14.9.12.4.5.17..1118.20.2.14.9...12.5154.11.20.6..152..18.16.14.10.5.20..63.17..9.102.1.14.11.18.13.10...739.2.16.20.14.11.10.8.3..76.16..20.13...8.3...18....12194.10.138.3...918..20.1310..124.19.3.1.15.17.13..4.14.10.12...20.8..1913.4.17.10..18.8...13.19.17.4.18.15.8.10.17.13.19.18..15.8.18.17.10...15.8.18.17.15...18.17.15.18.17.15.18..15..15.<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-left-alt:solid windowtext 1.0pt;
mso-border-right-alt:solid windowtext 1.0pt;padding:0in;mso-padding-alt:0in 5.0pt 0in 5.0pt'><span
style='font-size:8.0pt;mso-bidi-font-size:10.0pt;font-family:Courier'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-left-alt:solid windowtext 1.0pt;
mso-border-right-alt:solid windowtext 1.0pt;padding:0in;mso-padding-alt:0in 5.0pt 0in 5.0pt'><span
style='font-size:8.0pt;mso-bidi-font-size:10.0pt;font-family:Courier'>*****
PROCESS-MANAGER TEST COMPLETED SUCCESSFULLY *****<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-left-alt:solid windowtext 1.0pt;
mso-border-right-alt:solid windowtext 1.0pt;padding:0in;mso-padding-alt:0in 5.0pt 0in 5.0pt'><span
style='font-size:8.0pt;mso-bidi-font-size:10.0pt;font-family:Courier'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-left-alt:solid windowtext 1.0pt;
mso-border-right-alt:solid windowtext 1.0pt;padding:0in;mso-padding-alt:0in 5.0pt 0in 5.0pt'><span
style='font-size:8.0pt;mso-bidi-font-size:10.0pt;font-family:Courier'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-left-alt:solid windowtext 1.0pt;
mso-border-right-alt:solid windowtext 1.0pt;padding:0in;mso-padding-alt:0in 5.0pt 0in 5.0pt'><span
style='font-size:8.0pt;mso-bidi-font-size:10.0pt;font-family:Courier'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-left-alt:solid windowtext 1.0pt;
mso-border-right-alt:solid windowtext 1.0pt;padding:0in;mso-padding-alt:0in 5.0pt 0in 5.0pt'><span
style='font-size:8.0pt;mso-bidi-font-size:10.0pt;font-family:Courier'>*****<span
style="mso-spacerun: yes">&nbsp; </span>FRAME-MANAGER TEST<span
style="mso-spacerun: yes">&nbsp; </span>*****<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-left-alt:solid windowtext 1.0pt;
mso-border-right-alt:solid windowtext 1.0pt;padding:0in;mso-padding-alt:0in 5.0pt 0in 5.0pt'><span
style='font-size:8.0pt;mso-bidi-font-size:10.0pt;font-family:Courier'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-left-alt:solid windowtext 1.0pt;
mso-border-right-alt:solid windowtext 1.0pt;padding:0in;mso-padding-alt:0in 5.0pt 0in 5.0pt'><span
style='font-size:8.0pt;mso-bidi-font-size:10.0pt;font-family:Courier'>1234.57.68.9110...32.5..74...8.69..101.32.45.7.....6.9.8.310215.4......10967138...2...5107.946...1.25..38.9..10.64..79.21..5..710.8.1.3.9.2..684.19..5..6310..48..9..65.1.7.53..2.8..93.10..12.47..1..4.1086..110..48.6..35..9.710..9.85.3..4.78.6..310.4.7.3..58.10.6..94.1..37.8..6.92.5..74..12.4.2.3.1..5.26.10.3.1.7.5.8.10.3.1.9.6.8.10.3.1.4.6.10.8.3..31...134...513..1.83...3101..43..81..8..93.8.4..1.8.34..17.8.3.2.1.4.8.6.4.2.8.47...83.1.5.34..1.84.3.1..84..28..10..4107...4110..5.410..18.3.1.8.3..41..105..8..4510...7105..610..75..71...1085..7..410.75...175..9.75.10..58.7..4.52.7.6..7.6.5.4.10.85..10.6.7.47..5..106.7.510.7..56..26..69..2..652..28.6.1.2..36..52..36..7.29...912..97..16...10.129..76...139..7.91..24..79..101..82.6..91.2.6.9..71..93..61.10.9.1..62.8...298..810..48.1..6.810..1.210..8.510.8..110..9.8.10..2810..98..710..79.8..7.210.6...27.109.8...1017.2.10.7.8.10.7..47.10.8.1.10..48.7..4.17..84.5.4.1.7..8.45.4..58.4..7.5.104..56...56.4..765..10.5.67.4..9.5.6.7.5.6.45.8.6.4.7.6.1.5.9.6..26..105.4.6.10.2..23..3.1.23..6.5.23...623.10.2.6..54.2..5.3.26.3.7.2.3.1.3.1.9.2...613..41.10...1410..10.6.1.104.1..9.10..219....31019.7..10.93..10.1.910..32.1.3..109.2.5.1.2.3.10..97.1.10.5.9.4.9.1.2.10.3.9.2.9..110..93.9.1.7..71.7..27.5.7.4.7..42..7.410.7..48...18.75..87.10..4.8.2.8.46.7...984.5.8..9.5..74.58..10.54..7.8.5.47.8..65.4.7..5.84.5.1.5.4.9.5.3.5.8..95.6.6..10.65.8.7.6..26...926..72..6.2.54.2.3.6..102..56.10.2...7610...8610.1..2..110.4..1210.6..5.101.9..21.6..110.2..410..81.4.10..71..410.8.2.6.1.7..76.10.5.1..7.10.2.71..106.1..102.7.10.1.2.7..74.7..57.9..95.9..39..5..931..57..3.6..39.510.7..2.95.8.7...1039.2.9.8.9..2.5.310.5.2.5.7.9.1..73.5..54..5.1.43.10.4.2...3.25.4.9..34.25.9..34.5..79..2.3.4.21.4.7.3.5..24.9..3.52.3.4.5.2..82.6.2.5.4.7.2..94..3.2.9.6.1.6..69.6..56.7.6.4.2..46.9..46.9.6..3.69..49.6..92.6..39.5.9.3.9..9..79.8.8.1.9..86.2..89.6..29.6..89.8.2.8..96.8..8.6.8..98.4.8.9.8.4.8.6.8.4.8.6..3..3.2.3..93.8.3..63..83.9.3..3.2.3.8.9...3..3.3.3.3.3.3.3.3.<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-left-alt:solid windowtext 1.0pt;
mso-border-right-alt:solid windowtext 1.0pt;padding:0in;mso-padding-alt:0in 5.0pt 0in 5.0pt'><span
style='font-size:8.0pt;mso-bidi-font-size:10.0pt;font-family:Courier'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-left-alt:solid windowtext 1.0pt;
mso-border-right-alt:solid windowtext 1.0pt;padding:0in;mso-padding-alt:0in 5.0pt 0in 5.0pt'><span
style='font-size:8.0pt;mso-bidi-font-size:10.0pt;font-family:Courier'>Here is a
histogram showing how many times each frame was used:<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-left-alt:solid windowtext 1.0pt;
mso-border-right-alt:solid windowtext 1.0pt;padding:0in;mso-padding-alt:0in 5.0pt 0in 5.0pt'><span
style='font-size:8.0pt;mso-bidi-font-size:10.0pt;font-family:Courier'>0:<span
style="mso-spacerun: yes">&nbsp;
</span>******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-left-alt:solid windowtext 1.0pt;
mso-border-right-alt:solid windowtext 1.0pt;padding:0in;mso-padding-alt:0in 5.0pt 0in 5.0pt'><span
style='font-size:8.0pt;mso-bidi-font-size:10.0pt;font-family:Courier'>1:<span
style="mso-spacerun: yes">&nbsp;
</span>******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-left-alt:solid windowtext 1.0pt;
mso-border-right-alt:solid windowtext 1.0pt;padding:0in;mso-padding-alt:0in 5.0pt 0in 5.0pt'><span
style='font-size:8.0pt;mso-bidi-font-size:10.0pt;font-family:Courier'>2:<span
style="mso-spacerun: yes">&nbsp;
</span>******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-left-alt:solid windowtext 1.0pt;
mso-border-right-alt:solid windowtext 1.0pt;padding:0in;mso-padding-alt:0in 5.0pt 0in 5.0pt'><span
style='font-size:8.0pt;mso-bidi-font-size:10.0pt;font-family:Courier'><o:p>&nbsp;</o:p></span></p>

</div>

<p class=MsoNormal><i style='mso-bidi-font-style:normal'><span
style='font-size:16.0pt;mso-bidi-font-size:10.0pt;font-family:Times'><o:p>&nbsp;</o:p></span></i></p>

<p class=MsoNormal><i style='mso-bidi-font-style:normal'><span
style='font-size:16.0pt;mso-bidi-font-size:10.0pt;font-family:Times'>XXXXXXXXXXXXXXXXXXX<span
style="mso-spacerun: yes">&nbsp; </span>skipping<span style="mso-spacerun:
yes">&nbsp; </span>XXXXXXXXXXXXXXXXXXX<o:p></o:p></span></i></p>

<p class=MsoNormal><i style='mso-bidi-font-style:normal'><span
style='font-size:16.0pt;mso-bidi-font-size:10.0pt;font-family:Times'><o:p>&nbsp;</o:p></span></i></p>

<div style='mso-element:para-border-div;border-top:none;border-left:solid windowtext 1.0pt;
border-bottom:none;border-right:solid windowtext 1.0pt;padding:0in 5.0pt 0in 5.0pt'>

<p class=MsoNormal style='border:none;mso-border-left-alt:solid windowtext 1.0pt;
mso-border-right-alt:solid windowtext 1.0pt;padding:0in;mso-padding-alt:0in 5.0pt 0in 5.0pt'><span
style='font-size:8.0pt;mso-bidi-font-size:10.0pt;font-family:Courier'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-left-alt:solid windowtext 1.0pt;
mso-border-right-alt:solid windowtext 1.0pt;padding:0in;mso-padding-alt:0in 5.0pt 0in 5.0pt'><span
style='font-size:8.0pt;mso-bidi-font-size:10.0pt;font-family:Courier'>24:<span
style="mso-spacerun: yes">&nbsp;
</span>*****************************************************************************************************************************************************************************************************************<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-left-alt:solid windowtext 1.0pt;
mso-border-right-alt:solid windowtext 1.0pt;padding:0in;mso-padding-alt:0in 5.0pt 0in 5.0pt'><span
style='font-size:8.0pt;mso-bidi-font-size:10.0pt;font-family:Courier'>25:<span
style="mso-spacerun: yes">&nbsp;
</span>***********************************************************************************************************************************************************************************<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-left-alt:solid windowtext 1.0pt;
mso-border-right-alt:solid windowtext 1.0pt;padding:0in;mso-padding-alt:0in 5.0pt 0in 5.0pt'><span
style='font-size:8.0pt;mso-bidi-font-size:10.0pt;font-family:Courier'>26:<span
style="mso-spacerun: yes">&nbsp;
</span>*************************************************************************************************************<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-left-alt:solid windowtext 1.0pt;
mso-border-right-alt:solid windowtext 1.0pt;padding:0in;mso-padding-alt:0in 5.0pt 0in 5.0pt'><span
style='font-size:8.0pt;mso-bidi-font-size:10.0pt;font-family:Courier'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-left-alt:solid windowtext 1.0pt;
mso-border-right-alt:solid windowtext 1.0pt;padding:0in;mso-padding-alt:0in 5.0pt 0in 5.0pt'><span
style='font-size:8.0pt;mso-bidi-font-size:10.0pt;font-family:Courier'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-left-alt:solid windowtext 1.0pt;
mso-border-right-alt:solid windowtext 1.0pt;padding:0in;mso-padding-alt:0in 5.0pt 0in 5.0pt'><span
style='font-size:8.0pt;mso-bidi-font-size:10.0pt;font-family:Courier'>*****
FRAME-MANAGER TEST COMPLETED SUCCESSFULLY *****<o:p></o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-left-alt:solid windowtext 1.0pt;
mso-border-right-alt:solid windowtext 1.0pt;padding:0in;mso-padding-alt:0in 5.0pt 0in 5.0pt'><span
style='font-size:8.0pt;mso-bidi-font-size:10.0pt;font-family:Courier'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='border:none;mso-border-left-alt:solid windowtext 1.0pt;
mso-border-right-alt:solid windowtext 1.0pt;padding:0in;mso-padding-alt:0in 5.0pt 0in 5.0pt'><span
style='font-size:8.0pt;mso-bidi-font-size:10.0pt;font-family:Courier'><o:p>&nbsp;</o:p></span></p>

</div>

<div style='mso-element:para-border-div;border:solid windowtext 1.0pt;
border-top:none;padding:0in 5.0pt 1.0pt 5.0pt'>

<p class=MsoNormal style='border:none;mso-border-left-alt:solid windowtext 1.0pt;
mso-border-bottom-alt:solid windowtext 1.0pt;mso-border-right-alt:solid windowtext 1.0pt;
padding:0in;mso-padding-alt:0in 5.0pt 1.0pt 5.0pt'><span style='font-size:8.0pt;
mso-bidi-font-size:10.0pt;font-family:Courier'>====================<span
style="mso-spacerun: yes">&nbsp; </span>KPL PROGRAM TERMINATION<span
style="mso-spacerun: yes">&nbsp; </span>====================<o:p></o:p></span></p>

</div>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<b style='mso-bidi-font-weight:normal'><u><span style='font-size:14.0pt;
mso-bidi-font-size:10.0pt;font-family:Times;mso-fareast-font-family:"Times New Roman";
mso-bidi-font-family:"Times New Roman";mso-ansi-language:EN-US;mso-fareast-language:
EN-US'><br clear=ALL style='page-break-before:always'>
</span></u></b>

<h3>Coding Style</h3>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-pagination:none;tab-stops:28.0pt 56.0pt 84.0pt 112.0pt 140.0pt 168.0pt 196.0pt 224.0pt 3.5in 280.0pt 308.0pt 336.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-family:Times;
color:black'>For all projects, please follow our coding style.<span
style="mso-spacerun: yes">&nbsp; </span>Make your code match our code as
closely as possible.<o:p></o:p></span></p>

<p class=MsoNormal style='mso-pagination:none;tab-stops:28.0pt 56.0pt 84.0pt 112.0pt 140.0pt 168.0pt 196.0pt 224.0pt 3.5in 280.0pt 308.0pt 336.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-family:Times;
color:black'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-pagination:none;tab-stops:28.0pt 56.0pt 84.0pt 112.0pt 140.0pt 168.0pt 196.0pt 224.0pt 3.5in 280.0pt 308.0pt 336.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-family:Times;
color:black'>The goal is for it to be impossible to tell, just by looking at
the indentation and commenting, whether we wrote the code or you wrote the
code.<span style="mso-spacerun: yes">&nbsp; </span>(Of course, your code will
be circled!)<o:p></o:p></span></p>

<p class=MsoNormal style='mso-pagination:none;tab-stops:28.0pt 56.0pt 84.0pt 112.0pt 140.0pt 168.0pt 196.0pt 224.0pt 3.5in 280.0pt 308.0pt 336.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-family:Times;
color:black'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-pagination:none;tab-stops:28.0pt 56.0pt 84.0pt 112.0pt 140.0pt 168.0pt 196.0pt 224.0pt 3.5in 280.0pt 308.0pt 336.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-family:Times;
color:black'>Please use our convention in labeling and commenting functions:<o:p></o:p></span></p>

<p class=MsoNormal style='mso-pagination:none;tab-stops:28.0pt 56.0pt 84.0pt 112.0pt 140.0pt 168.0pt 196.0pt 224.0pt 3.5in 280.0pt 308.0pt 336.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-family:Times;
color:black'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-pagination:none;tab-stops:28.0pt 56.0pt 84.0pt 112.0pt 140.0pt 168.0pt 196.0pt 224.0pt 3.5in 280.0pt 308.0pt 336.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt;
font-family:Courier;color:black'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>-----------------------------<span
style="mso-spacerun: yes">&nbsp; </span>Foo<span style="mso-spacerun:
yes">&nbsp; </span>---------------------------------<o:p></o:p></span></p>

<p class=MsoNormal style='mso-pagination:none;tab-stops:28.0pt 56.0pt 84.0pt 112.0pt 140.0pt 168.0pt 196.0pt 224.0pt 3.5in 280.0pt 308.0pt 336.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt;
font-family:Courier;color:black'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-pagination:none;tab-stops:28.0pt 56.0pt 84.0pt 112.0pt 140.0pt 168.0pt 196.0pt 224.0pt 3.5in 280.0pt 308.0pt 336.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt;
font-family:Courier;color:black'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style="mso-spacerun: yes">&nbsp; </span>function Foo ()<o:p></o:p></span></p>

<p class=MsoNormal style='mso-pagination:none;tab-stops:28.0pt 56.0pt 84.0pt 112.0pt 140.0pt 168.0pt 196.0pt 224.0pt 3.5in 280.0pt 308.0pt 336.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt;
font-family:Courier;color:black'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span>--<o:p></o:p></span></p>

<p class=MsoNormal style='mso-pagination:none;tab-stops:28.0pt 56.0pt 84.0pt 112.0pt 140.0pt 168.0pt 196.0pt 224.0pt 3.5in 280.0pt 308.0pt 336.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt;
font-family:Courier;color:black'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span>-- This routine does....<o:p></o:p></span></p>

<p class=MsoNormal style='mso-pagination:none;tab-stops:28.0pt 56.0pt 84.0pt 112.0pt 140.0pt 168.0pt 196.0pt 224.0pt 3.5in 280.0pt 308.0pt 336.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt;
font-family:Courier;color:black'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span>--<o:p></o:p></span></p>

<p class=MsoNormal style='mso-pagination:none;tab-stops:28.0pt 56.0pt 84.0pt 112.0pt 140.0pt 168.0pt 196.0pt 224.0pt 3.5in 280.0pt 308.0pt 336.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt;
font-family:Courier;color:black'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span>var x: int<o:p></o:p></span></p>

<p class=MsoNormal style='mso-pagination:none;tab-stops:28.0pt 56.0pt 84.0pt 112.0pt 140.0pt 168.0pt 196.0pt 224.0pt 3.5in 280.0pt 308.0pt 336.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt;
font-family:Courier;color:black'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>x = 1<o:p></o:p></span></p>

<p class=MsoNormal style='mso-pagination:none;tab-stops:28.0pt 56.0pt 84.0pt 112.0pt 140.0pt 168.0pt 196.0pt 224.0pt 3.5in 280.0pt 308.0pt 336.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt;
font-family:Courier;color:black'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>x = 2<o:p></o:p></span></p>

<p class=MsoNormal style='mso-pagination:none;tab-stops:28.0pt 56.0pt 84.0pt 112.0pt 140.0pt 168.0pt 196.0pt 224.0pt 3.5in 280.0pt 308.0pt 336.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt;
font-family:Courier;color:black'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>...<o:p></o:p></span></p>

<p class=MsoNormal style='mso-pagination:none;tab-stops:28.0pt 56.0pt 84.0pt 112.0pt 140.0pt 168.0pt 196.0pt 224.0pt 3.5in 280.0pt 308.0pt 336.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt;
font-family:Courier;color:black'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>x = 9<o:p></o:p></span></p>

<p class=MsoNormal style='mso-pagination:none;tab-stops:28.0pt 56.0pt 84.0pt 112.0pt 140.0pt 168.0pt 196.0pt 224.0pt 3.5in 280.0pt 308.0pt 336.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt;
font-family:Courier;color:black'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span>endFunction<o:p></o:p></span></p>

<p class=MsoNormal style='mso-pagination:none;tab-stops:28.0pt 56.0pt 84.0pt 112.0pt 140.0pt 168.0pt 196.0pt 224.0pt 3.5in 280.0pt 308.0pt 336.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-family:Times;
color:black'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-pagination:none;tab-stops:28.0pt 56.0pt 84.0pt 112.0pt 140.0pt 168.0pt 196.0pt 224.0pt 3.5in 280.0pt 308.0pt 336.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-family:Times;
color:black'>Methods are labeled like this, with both class and method name:<o:p></o:p></span></p>

<p class=MsoNormal style='mso-pagination:none;tab-stops:28.0pt 56.0pt 84.0pt 112.0pt 140.0pt 168.0pt 196.0pt 224.0pt 3.5in 280.0pt 308.0pt 336.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-family:Times;
color:black'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-pagination:none;tab-stops:28.0pt 56.0pt 84.0pt 112.0pt 140.0pt 168.0pt 196.0pt 224.0pt 3.5in 280.0pt 308.0pt 336.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt;
font-family:Courier;color:black'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>----------<span
style="mso-spacerun: yes">&nbsp; </span>Condition . Wait<span
style="mso-spacerun: yes">&nbsp; </span>----------<o:p></o:p></span></p>

<p class=MsoNormal style='mso-pagination:none;tab-stops:28.0pt 56.0pt 84.0pt 112.0pt 140.0pt 168.0pt 196.0pt 224.0pt 3.5in 280.0pt 308.0pt 336.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt;
font-family:Courier;color:black'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><o:p></o:p></span></p>

<p class=MsoNormal style='mso-pagination:none;tab-stops:28.0pt 56.0pt 84.0pt 112.0pt 140.0pt 168.0pt 196.0pt 224.0pt 3.5in 280.0pt 308.0pt 336.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt;
font-family:Courier;color:black'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>method Wait
(mutex: ptr to Mutex)<o:p></o:p></span></p>

<p class=MsoNormal style='mso-pagination:none;tab-stops:28.0pt 56.0pt 84.0pt 112.0pt 140.0pt 168.0pt 196.0pt 224.0pt 3.5in 280.0pt 308.0pt 336.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:10.0pt;
font-family:Courier;color:black'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>...<o:p></o:p></span></p>

<p class=MsoNormal style='mso-pagination:none;tab-stops:28.0pt 56.0pt 84.0pt 112.0pt 140.0pt 168.0pt 196.0pt 224.0pt 3.5in 280.0pt 308.0pt 336.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-family:Times;
color:black'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-pagination:none;tab-stops:28.0pt 56.0pt 84.0pt 112.0pt 140.0pt 168.0pt 196.0pt 224.0pt 3.5in 280.0pt 308.0pt 336.0pt;
mso-layout-grid-align:none;text-autospace:none'><span style='font-family:Times;
color:black'>Note that indentation is in increments of 2 spaces.<span
style="mso-spacerun: yes">&nbsp; </span>Please be careful to indent statements
such as <b style='mso-bidi-font-weight:normal'>if</b>, <b style='mso-bidi-font-weight:
normal'>while</b>, and <b style='mso-bidi-font-weight:normal'>for</b> properly.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

</div>

</body>

</html>
