<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns:m="http://schemas.microsoft.com/office/2004/12/omml"
xmlns:css="http://macVmlSchemaUri" xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta name=Title content="Project 2">
<meta name=Keywords content="">
<meta http-equiv=Content-Type content="text/html; charset=macintosh">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 2008">
<meta name=Originator content="Microsoft Word 2008">
<link rel=File-List href="proj2_files/filelist.xml">
<title>Project 2</title>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>Harry H. Porter III</o:Author>
  <o:Template>Normal.dotm</o:Template>
  <o:LastAuthor>Harry</o:LastAuthor>
  <o:Revision>2</o:Revision>
  <o:TotalTime>3177</o:TotalTime>
  <o:LastPrinted>2009-04-03T01:35:00Z</o:LastPrinted>
  <o:Created>2009-04-03T01:35:00Z</o:Created>
  <o:LastSaved>2009-04-03T01:35:00Z</o:LastSaved>
  <o:Pages>2</o:Pages>
  <o:Words>3716</o:Words>
  <o:Characters>18582</o:Characters>
  <o:Lines>502</o:Lines>
  <o:Paragraphs>204</o:Paragraphs>
  <o:CharactersWithSpaces>26014</o:CharactersWithSpaces>
  <o:Version>12.0</o:Version>
 </o:DocumentProperties>
 <o:OfficeDocumentSettings>
  <o:AllowPNG/>
 </o:OfficeDocumentSettings>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:ActiveWritingStyle Lang="EN-US" VendorID="6" DLLVersion="2" NLCheck="0">1</w:ActiveWritingStyle>
  <w:TrackMoves>false</w:TrackMoves>
  <w:TrackFormatting/>
  <w:HyphenationZone>0</w:HyphenationZone>
  <w:DoNotHyphenateCaps/>
  <w:DrawingGridHorizontalSpacing>0 pt</w:DrawingGridHorizontalSpacing>
  <w:DrawingGridVerticalSpacing>0 pt</w:DrawingGridVerticalSpacing>
  <w:DisplayHorizontalDrawingGridEvery>0</w:DisplayHorizontalDrawingGridEvery>
  <w:DisplayVerticalDrawingGridEvery>0</w:DisplayVerticalDrawingGridEvery>
  <w:UseMarginsForDrawingGridOrigin/>
  <w:ValidateAgainstSchemas>false</w:ValidateAgainstSchemas>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:DoNotUnderlineInvalidXML/>
  <w:DrawingGridHorizontalOrigin>0 pt</w:DrawingGridHorizontalOrigin>
  <w:DrawingGridVerticalOrigin>0 pt</w:DrawingGridVerticalOrigin>
  <w:DoNotShadeFormData/>
  <w:Compatibility>
   <w:BreakWrappedTables/>
   <w:UseNormalStyleForList/>
   <w:DontUseIndentAsNumberingTabStop/>
   <w:DontGrowAutofit/>
   <w:FELineBreak11/>
   <w:WW11IndentRules/>
   <w:DontAutofitConstrainedTables/>
   <w:AutofitLikeWW11/>
   <w:HangulWidthLikeWW11/>
  </w:Compatibility>
 </w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" LatentStyleCount="276">
 </w:LatentStyles>
</xml><![endif]-->
<style>
<!--
 /* Font Definitions */
@font-face
	{font-family:"Courier New";
	panose-1:2 7 3 9 2 2 5 2 4 4;
	mso-font-charset:0;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:Times;
	panose-1:2 0 5 0 0 0 0 0 0 0;
	mso-font-charset:0;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
@font-face
	{font-family:"New York";
	panose-1:2 2 5 2 6 3 5 6 2 4;
	mso-font-charset:77;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:3 0 0 0 1 0;}
 /* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";}
h1
	{mso-style-next:Normal;
	margin:0in;
	margin-bottom:.0001pt;
	text-align:justify;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:1;
	font-size:12.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ascii-font-family:Times;
	mso-hansi-font-family:Times;
	mso-font-kerning:0pt;
	text-decoration:underline;
	text-underline:single;}
h2
	{mso-style-next:Normal;
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:2;
	font-size:12.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ascii-font-family:Times;
	mso-hansi-font-family:Times;
	text-decoration:underline;
	text-underline:single;}
h3
	{mso-style-next:Normal;
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:3;
	font-size:14.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ascii-font-family:Times;
	mso-hansi-font-family:Times;
	text-decoration:underline;
	text-underline:single;}
h4
	{mso-style-next:Normal;
	margin:0in;
	margin-bottom:.0001pt;
	text-align:center;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:4;
	font-size:20.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ascii-font-family:Times;
	mso-hansi-font-family:Times;}
h5
	{mso-style-next:Normal;
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:5;
	font-size:12.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ascii-font-family:"Courier New";
	mso-hansi-font-family:"Courier New";}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	tab-stops:center 3.0in right 6.0in;
	font-size:12.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	tab-stops:center 3.0in right 6.0in;
	font-size:12.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";
	mso-bidi-font-family:"Times New Roman";}
p.MsoBodyText, li.MsoBodyText, div.MsoBodyText
	{margin:0in;
	margin-bottom:.0001pt;
	text-align:justify;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ascii-font-family:Times;
	mso-fareast-font-family:"Times New Roman";
	mso-hansi-font-family:Times;
	mso-bidi-font-family:"Times New Roman";}
p.MsoBodyTextIndent, li.MsoBodyTextIndent, div.MsoBodyTextIndent
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.25in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	mso-bidi-font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ascii-font-family:Times;
	mso-fareast-font-family:"Times New Roman";
	mso-hansi-font-family:Times;
	mso-bidi-font-family:"Times New Roman";}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;
	text-underline:single;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;
	text-underline:single;}
 /* Page Definitions */
@page
	{mso-page-border-surround-header:no;
	mso-page-border-surround-footer:no;}
@page Section1
	{size:8.5in 11.0in;
	margin:1.0in .75in 1.0in .75in;
	mso-header-margin:.5in;
	mso-footer-margin:.5in;
	mso-header:url(":proj2_files:header.htm") h1;
	mso-footer:url(":proj2_files:header.htm") f1;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
table.MsoNormalTable
	{mso-style-name:"Table Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0in 5.4pt 0in 5.4pt;
	mso-para-margin:0in;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ascii-font-family:"New York";
	mso-hansi-font-family:"New York";}
</style>
<![endif]--><!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="1026"/>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1"/>
 </o:shapelayout></xml><![endif]-->
</head>

<body lang=EN-US link=blue vlink=purple style='tab-interval:.5in'>

<div class=Section1>

<p class=MsoNormal align=center style='text-align:center'><b style='mso-bidi-font-weight:
normal'><span style='font-size:20.0pt;mso-bidi-font-size:10.0pt;font-family:
Times'>Programming Project 2:<o:p></o:p></span></b></p>

<h4>Threads and Interprocess Communication</h4>

<p class=MsoNormal style='text-align:justify'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-align:justify'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><u><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;font-family:Times'>Due Date:</span></u></b><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;font-family:Times'> </span><span
style='font-family:Times'>______________________________<o:p></o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><u><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;font-family:Times'>Duration:</span></u></b><span
style='font-size:14.0pt;mso-bidi-font-size:10.0pt;font-family:Times'><span
style="mso-spacerun: yes">&nbsp; </span></span><span style='font-family:Times'>One
Week<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<h3>Overview and Goal</h3>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>In this project you will
learn about threads and gain familiarity writing programs involving concurrency
control.<span style="mso-spacerun: yes">&nbsp; </span>You will begin by
studying the thread package, which implements multi-threading.<span
style="mso-spacerun: yes">&nbsp; </span>You will make modifications and
additions to the existing code.<span style="mso-spacerun: yes">&nbsp;
</span>Then you will use the threads package to solve some traditional
concurrency problems.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>In addition, you will gain
familiarity programming in the KPL language.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>If you have difficulties
with this project or want to go into more depth, take a look at the document
called “The Thread Scheduler and Concurrency Control Primitives”:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><span style='mso-tab-count:
1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><a
href="http://web.cecs.pdx.edu/~harry/Blitz/BlitzDoc/ThreadScheduler.htm">http://web.cecs.pdx.edu/~harry/Blitz/BlitzDoc/ThreadScheduler.htm</a><o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><span style='mso-tab-count:
1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><a
href="http://web.cecs.pdx.edu/~harry/Blitz/BlitzDoc/ThreadScheduler.pdf">http://web.cecs.pdx.edu/~harry/Blitz/BlitzDoc/ThreadScheduler.pdf</a><o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<h3>Step 1:<span style="mso-spacerun: yes">&nbsp; </span>Download the Files</h3>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Start by creating a
directory for the files you’ll need for this project.<span style="mso-spacerun:
yes">&nbsp; </span>You might call it:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:Courier'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span></b><a
name="OLE_LINK5"><i style='mso-bidi-font-style:normal'><span style='font-family:
Courier'>~YourUserName</span></i></a><span style='mso-bookmark:OLE_LINK5'><b
style='mso-bidi-font-weight:normal'><span style='font-family:Courier'>/cs333/p</span></b></span><b
style='mso-bidi-font-weight:normal'><span style='font-family:Courier'>2<o:p></o:p></span></b></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Then download all the files
from:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><span style='mso-tab-count:
1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></span><b
style='mso-bidi-font-weight:normal'><span style='font-family:Courier'>http://www.cs.pdx.edu/~harry/Blitz/OSProject/p2/</span></b><span
style='font-family:"Courier New"'><o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>into your directory.<span
style="mso-spacerun: yes">&nbsp; </span>You should get the following files:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>makefile<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>DISK<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>System.h<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>System.c<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>Runtime.s<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>Switch.s<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>List.h<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>List.c<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>Thread.h<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>Thread.c<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>Main.h<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>Main.c<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>Synch.h<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>Synch.c<o:p></o:p></span></b></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>In this project, you will
modify and hand in the following files:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>Main.c<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>Synch.h<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>Synch.c<o:p></o:p></span></b></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>After getting the files, you
should be able to compile all the code (as is) with the UNIX <b
style='mso-bidi-font-weight:normal'>make</b> command.<span style="mso-spacerun:
yes">&nbsp; </span>The program executable we are building will be called
“os”.<span style="mso-spacerun: yes">&nbsp; </span>You can execute the program
by typing:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>% make<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>% blitz &#8211;g os<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>In the course of your
experimentation, you may modify other files besides <b style='mso-bidi-font-weight:
normal'>Synch.h</b>, <b style='mso-bidi-font-weight:normal'>Synch.c</b> and <b
style='mso-bidi-font-weight:normal'>Main.c</b>, but the code you are required
to write and turn in doesn’t require any changes to the other files.<span
style="mso-spacerun: yes">&nbsp; </span>For example, you may wish to uncomment
some of the print statements, to see what happens.<span style="mso-spacerun:
yes">&nbsp; </span><i style='mso-bidi-font-style:normal'>However, your final
versions of <b style='mso-bidi-font-weight:normal'>Synch.h</b>, <b
style='mso-bidi-font-weight:normal'>Synch.c </b>and<b style='mso-bidi-font-weight:
normal'> Main.c</b> must work with the other files, exactly as they are
distributed.<o:p></o:p></i></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Be sure you copy all
files.<span style="mso-spacerun: yes">&nbsp; </span>Even though there are
similarities with some of the files used for the previous project, there may be
some subtle but important differences.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<h3>Step 2:<span style="mso-spacerun: yes">&nbsp; </span>Study the Existing
Code</h3>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>The code provided in this
project provides the ability to create and run multiple threads, and to control
concurrency through several synchronization methods.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Start by looking over the <b
style='mso-bidi-font-weight:normal'>System</b> package.<span
style="mso-spacerun: yes">&nbsp; </span>Focus on the material toward the
beginning of file <b style='mso-bidi-font-weight:normal'>System.c</b>, namely
the functions:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>print<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>printInt<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>printHex<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>printChar<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>printBool<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>nl<o:p></o:p></span></b></p>

<h5><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>MemoryEqual</h5>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>StrEqual<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>StrCopy<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>StrCmp<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>Min<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>Max<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>printIntVar<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>printHexVar<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>printBoolVar<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>printCharVar<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>printPtr<o:p></o:p></span></b></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Get familiar with the
printing functions; you’ll be calling them a lot.<span style="mso-spacerun:
yes">&nbsp; </span>Some are implemented in assembly code and some are
implemented in KPL in the <b style='mso-bidi-font-weight:normal'>System</b>
package.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>The following functions are
used to implement the heap in KPL:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>KPLSystemInitialize
<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>KPLMemoryAlloc
<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>KPLMemoryFree
<o:p></o:p></span></b></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Objects can be allocated on
the heap and freed with the <b style='mso-bidi-font-weight:normal'>alloc</b>
and <b style='mso-bidi-font-weight:normal'>free</b> statements.<span
style="mso-spacerun: yes">&nbsp; </span>The HEAP implementation is very
rudimentary in this implementation.<span style="mso-spacerun: yes">&nbsp;
</span>In your kernel, you may allocate objects during start-up but after that,
<i style='mso-bidi-font-style:normal'>YOU MUST NOT ALLOCATE OBJECTS ON THE HEAP</i>!<span
style="mso-spacerun: yes">&nbsp; </span>Why?<span style="mso-spacerun:
yes">&nbsp; </span>Because the heap might fill up and then what is a kernel
supposed to do?<span style="mso-spacerun: yes">&nbsp; </span>Crash.<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>In this project, you should
not allocate anything on the heap.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>The following functions can
be ignored since they concern aspects of the KPL language that we will not be
using:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>KPLUncaughtThrow
<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>UncaughtThrowError
<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>KPLIsKindOf
<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>KPLSystemError<o:p></o:p></span></b></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>The <b style='mso-bidi-font-weight:
normal'>Runtime.s </b>file contains a number of routines coded in assembly
language.<span style="mso-spacerun: yes">&nbsp; </span>It contains the program
entry point and the interrupt vector in low memory.<span style="mso-spacerun:
yes">&nbsp; </span>Take a look at it.<span style="mso-spacerun: yes">&nbsp;
</span>Follow what happens when program execution begins at location 0x00000000
(the label “_entry”).<span style="mso-spacerun: yes">&nbsp; </span>The code
labeled “_mainEntry” is included in code the compiler produces.<span
style="mso-spacerun: yes">&nbsp; </span>The “_mainEntry” code will call the <b
style='mso-bidi-font-weight:normal'>main</b> function, which appears in the
file <b style='mso-bidi-font-weight:normal'>Main.c</b>.<b style='mso-bidi-font-weight:
normal'><o:p></o:p></b></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>In <b style='mso-bidi-font-weight:
normal'>Runtime.s</b>, follow what happens when a timer interrupt occurs.<span
style="mso-spacerun: yes">&nbsp; </span>It makes an “up-call” to a routine
called <b style='mso-bidi-font-weight:normal'>_P_Thread_TimerInterruptHandler</b>.<span
style="mso-spacerun: yes">&nbsp; </span>This name refers to “a function called <b
style='mso-bidi-font-weight:normal'>TimerInterruptHandler</b> in a package
called <b style='mso-bidi-font-weight:normal'>Thread</b>.”<span
style="mso-spacerun: yes">&nbsp; </span>(<b style='mso-bidi-font-weight:normal'>_P_Thread_TimerInterruptHandler</b>
is the name the compiler will give this function.)<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>All the code in this project
assumes that no other interrupt types (such as a <b style='mso-bidi-font-weight:
normal'>DiskInterrupt</b>) occur.<span style="mso-spacerun: yes">&nbsp;
</span>In <b style='mso-bidi-font-weight:normal'>Runtime.s</b>, follow what
would happen if another sort of interrupt should ever occur.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>The KPL language will check
for lots of error conditions, such as the use of a null pointer.<span
style="mso-spacerun: yes">&nbsp; </span>Try changing the program to make this
error.<span style="mso-spacerun: yes">&nbsp; </span>Follow in <b
style='mso-bidi-font-weight:normal'>Runtime.s</b> what happens when this
occurs.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Next take a look at the <b
style='mso-bidi-font-weight:normal'>List</b> package.<span style="mso-spacerun:
yes">&nbsp; </span>Read the header file carefully.<span style="mso-spacerun:
yes">&nbsp; </span>This package provides code that implements a linked
list.<span style="mso-spacerun: yes">&nbsp; </span>We’ll use linked lists in
this project.<span style="mso-spacerun: yes">&nbsp; </span>For example, the
threads that are ready to run (and waiting for time on the CPU) will be kept in
a linked list called the “ready list”.<span style="mso-spacerun: yes">&nbsp;
</span>Threads that become BLOCKED will sit on other linked lists.<span
style="mso-spacerun: yes">&nbsp; </span>Also look over the <b style='mso-bidi-font-weight:
normal'>List.c</b> code file.<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>The key class in this
project is named <b style='mso-bidi-font-weight:normal'>Thread</b>, and it is
located in the <b style='mso-bidi-font-weight:normal'>Thread</b> package along
with other stuff (see <b style='mso-bidi-font-weight:normal'>Thread.h</b>, <b
style='mso-bidi-font-weight:normal'>Thread.c</b>).<span style="mso-spacerun:
yes">&nbsp; </span>For each thread, there will be a single <b style='mso-bidi-font-weight:
normal'>Thread</b> object.<span style="mso-spacerun: yes">&nbsp; </span><b
style='mso-bidi-font-weight:normal'>Thread</b> is a subclass of <b
style='mso-bidi-font-weight:normal'>Listable</b>, which means that each <b
style='mso-bidi-font-weight:normal'>Thread</b> object contains a <b
style='mso-bidi-font-weight:normal'>next</b> pointer and can be added to a
linked list.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>The <b style='mso-bidi-font-weight:
normal'>Thread</b> package is central and you should study this code
thoroughly.<span style="mso-spacerun: yes">&nbsp; </span>This package contains
one class (called <b style='mso-bidi-font-weight:normal'>Thread</b>) and
several functions related to thread scheduling and time-slicing:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><b style='mso-bidi-font-weight:
normal'>InitializeScheduler</b> ()<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><b style='mso-bidi-font-weight:
normal'>IdleFunction</b> (arg: int)<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><b style='mso-bidi-font-weight:
normal'>Run</b> (nextThread: ptr to Thread)<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><b style='mso-bidi-font-weight:
normal'>PrintReadyList</b> ()<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><b style='mso-bidi-font-weight:
normal'>ThreadStartMain</b> ()<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><b style='mso-bidi-font-weight:
normal'>ThreadFinish</b> ()<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><b style='mso-bidi-font-weight:
normal'>FatalError</b> (errorMessage: ptr to array of char)<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><b style='mso-bidi-font-weight:
normal'>SetInterruptsTo</b> (newStatus: int) returns int<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><b style='mso-bidi-font-weight:
normal'>TimerInterruptHandler</b> ()<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:Times'>FatalError</span></b><span style='font-family:Times'>
is the simplest function.<span style="mso-spacerun: yes">&nbsp; </span>We will
call <b style='mso-bidi-font-weight:normal'>FatalError</b> whenever we wish to
print an error message and abort the program.<span style="mso-spacerun:
yes">&nbsp; </span>Typically, we’ll call <b style='mso-bidi-font-weight:normal'>FatalError</b>
after making some check and finding that things are not as expected.<span
style="mso-spacerun: yes">&nbsp; </span><b style='mso-bidi-font-weight:normal'>FatalError</b>
will print the name of the thread invoking it, print the message, and then shut
down.<span style="mso-spacerun: yes">&nbsp; </span>It will throw us into the
BLITZ emulator command line mode.<span style="mso-spacerun: yes">&nbsp;
</span>Normally, the next thing to do might be to type the “st” command (short
for “stack”), to see which functions and methods were active.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>(Of course the information
printed out by the emulator will pertain to only the thread that invoked <b
style='mso-bidi-font-weight:normal'>FatalError</b>.<span style="mso-spacerun:
yes">&nbsp; </span>The emulator does not know about threads, and it is pretty
much impossible to extract information about other threads by examining bytes
in memory.)<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>The next function to look at
is <b style='mso-bidi-font-weight:normal'>SetInterruptsTo</b>, which is used to
change the “I” interrupt bit in the CPU.<span style="mso-spacerun: yes">&nbsp;
</span>We can use it to disable interrupts with code like this:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>... = SetInterruptsTo
(DISABLED)<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>and we can use it to enable
interrupts:<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>... = SetInterruptsTo
(ENABLED)<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>This function returns the
previous status.<span style="mso-spacerun: yes">&nbsp; </span>This is very
useful because we often want to DISABLE interrupts (regardless of what they
were before) and then later we want to return the interrupt status to whatever
it was before.<span style="mso-spacerun: yes">&nbsp; </span>In our kernel,
we’ll often see code like:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><u>var</u> oldIntStat:
int<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>...<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>oldIntStat =
SetInterruptsTo (DISABLED)<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>...<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>oldIntStat =
SetInterruptsTo (oldIntStat)<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Next take a look at the <b
style='mso-bidi-font-weight:normal'>Thread</b> class.<span style="mso-spacerun:
yes">&nbsp; </span>Here are the fields of <b style='mso-bidi-font-weight:normal'>Thread</b>:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><b style='mso-bidi-font-weight:
normal'>name</b>: <u>ptr</u> <u>to</u> <u>array</u> <u>of</u> <u>char</u><o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><b style='mso-bidi-font-weight:
normal'>status</b>: <u>int<o:p></o:p></u></span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><b style='mso-bidi-font-weight:
normal'>systemStack</b>: <u>array </u>[SYSTEM_STACK_SIZE] <u>of</u> <u>int</u><o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><b style='mso-bidi-font-weight:
normal'>regs</b>: <u>array</u> [13] <u>of</u> <u>int</u><o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><b style='mso-bidi-font-weight:
normal'>stackTop</b>: <u>ptr</u> <u>to</u> <u>void</u><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:.5in'><b style='mso-bidi-font-weight:
normal'><span style='font-family:"Courier New"'>initialFunction</span></b><span
style='font-family:"Courier New"'>: <u>ptr</u> <u>to</u> <u>function</u> (<u>int</u>)<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:.5in'><b style='mso-bidi-font-weight:
normal'><span style='font-family:"Courier New"'>initialArgument</span></b><span
style='font-family:"Courier New"'>: <u>int</u><o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Here are the operations
(i.e., methods) you can do on a <b style='mso-bidi-font-weight:normal'>Thread</b>:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><b style='mso-bidi-font-weight:
normal'>Init</b> (n: <u>ptr</u> <u>to</u> <u>array</u> <u>of</u> <u>char</u>)<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><b style='mso-bidi-font-weight:
normal'>Fork</b> (fun: <u>ptr</u> <u>to</u> <u>function</u> (<u>int</u>), arg: <u>int</u>)<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><b style='mso-bidi-font-weight:
normal'>Yield</b> ()<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><b style='mso-bidi-font-weight:
normal'>Sleep</b> ()<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><b style='mso-bidi-font-weight:
normal'>CheckOverflow</b> ()<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span><b style='mso-bidi-font-weight:
normal'>Print</b> ()<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Each thread is in one of the
following states:<span style="mso-spacerun: yes">&nbsp; </span>JUST_CREATED,
READY, RUNNING, BLOCKED, and UNUSED, and this is given in the <b
style='mso-bidi-font-weight:normal'>status</b> field.<span style="mso-spacerun:
yes">&nbsp; </span>(The UNUSED status is given to a <b style='mso-bidi-font-weight:
normal'>Thread</b> after it has terminated.<span style="mso-spacerun:
yes">&nbsp; </span>We’ll need this in later projects.)<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Each thread has a <b
style='mso-bidi-font-weight:normal'>name</b>.<span style="mso-spacerun:
yes">&nbsp; </span>To create a thread, you’ll need a <b style='mso-bidi-font-weight:
normal'>Thread</b> variable.<span style="mso-spacerun: yes">&nbsp;
</span>First, use <b style='mso-bidi-font-weight:normal'>Init</b> to initialize
it, providing a name.<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Each thread needs its own
stack and space for this stack is placed directly in the <b style='mso-bidi-font-weight:
normal'>Thread</b> object in the field called <b style='mso-bidi-font-weight:
normal'>systemStack</b>.<span style="mso-spacerun: yes">&nbsp;
</span>Currently, this is an array of 1000 words, which should be enough.<span
style="mso-spacerun: yes">&nbsp; </span>(It is conceivable our code could
overflow this limit; there is a check to make sure we don’t overflow this
limited area.)<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>All threads in this project
will run in System mode.<span style="mso-spacerun: yes">&nbsp; </span>Therefore
the stack is called the “system stack”.<span style="mso-spacerun: yes">&nbsp;
</span>In later projects, we’ll see that this stack is used only for kernel
routines.<span style="mso-spacerun: yes">&nbsp; </span>User programs will have
their own stacks in their virtual address spaces, but we are getting ahead of
ourselves.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>The <b style='mso-bidi-font-weight:
normal'>Thread</b> object also has space to store the state of the CPU, namely
the registers.<span style="mso-spacerun: yes">&nbsp; </span>Whenever a thread
switch occurs, the registers will be saved in the <b style='mso-bidi-font-weight:
normal'>Thread</b> object.<span style="mso-spacerun: yes">&nbsp; </span>These
fields (<b style='mso-bidi-font-weight:normal'>regs</b> and <b
style='mso-bidi-font-weight:normal'>stackTop</b>) are used by the assembly code
routine named <b style='mso-bidi-font-weight:normal'>Switch</b>.<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'>The <b
style='mso-bidi-font-weight:normal'>Thread</b> object also has space to store a
pointer to a function (the <b style='mso-bidi-font-weight:normal'>initialFunction</b>
field) and an argument for this function (the <b style='mso-bidi-font-weight:
normal'>initialArgument</b> field).<span style="mso-spacerun: yes">&nbsp;
</span>This pointer will point to the “main” function of this thread; this is
the function that will get executed when this thread begins execution.<span
style="mso-spacerun: yes">&nbsp; </span>We are storing a pointer to the
function because this is a variable: different threads may execute different
functions.<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'>We
are also able to supply an initial argument to this thread, through the <b
style='mso-bidi-font-weight:normal'>initialArgument</b> field.<span
style="mso-spacerun: yes">&nbsp; </span>This argument must be an integer.<span
style="mso-spacerun: yes">&nbsp; </span>Often there will be several threads
executing the same “main” function.<span style="mso-spacerun: yes">&nbsp;
</span>The argument is a handy way to let each thread know what its role should
be.<span style="mso-spacerun: yes">&nbsp; </span>For example, we might create
10 threads each using the same “main” function, but passing each thread a
different integer (say, between 1 and 10) to let it know which thread it is.<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'>After
initializing a new <b style='mso-bidi-font-weight:normal'>Thread</b>, we can
start it running with the <b style='mso-bidi-font-weight:normal'>Fork</b>
method.<span style="mso-spacerun: yes">&nbsp; </span>This doesn’t immediately
begin the thread execution; instead it makes the thread READY to run and places
it on the <b style='mso-bidi-font-weight:normal'>readyList</b>.<span
style="mso-spacerun: yes">&nbsp; </span>The <b style='mso-bidi-font-weight:
normal'>readyList</b> is a linked list of <b style='mso-bidi-font-weight:normal'>Threads</b>.<span
style="mso-spacerun: yes">&nbsp; </span>All <b style='mso-bidi-font-weight:
normal'>Threads</b> on the <b style='mso-bidi-font-weight:normal'>readyList</b>
have status READY.<span style="mso-spacerun: yes">&nbsp; </span><b
style='mso-bidi-font-weight:normal'>ReadyList </b>is a global variable.<span
style="mso-spacerun: yes">&nbsp; </span>There is another global variable named <b
style='mso-bidi-font-weight:normal'>currentThread</b>, which points to the
currently executing <b style='mso-bidi-font-weight:normal'>Thread</b> object;
i.e., the <b style='mso-bidi-font-weight:normal'>Thread</b> whose status is
RUNNING.<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'>The <b
style='mso-bidi-font-weight:normal'>Yield</b> method should only be invoked on
the currently running thread.<span style="mso-spacerun: yes">&nbsp; </span>It
will cause a switch to some other thread.<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'>Follow
the code in <b style='mso-bidi-font-weight:normal'>Yield</b> closely to see
what happens when a thread switch occurs.<span style="mso-spacerun: yes">&nbsp;
</span>First, interrupts are disabled; we don’t want any interference during a
thread switch.<span style="mso-spacerun: yes">&nbsp; </span>The <b
style='mso-bidi-font-weight:normal'>readyList</b> and <b style='mso-bidi-font-weight:
normal'>currentThread</b> are shared variables and, while switching threads, we
want to be able to access and update them safely.<span style="mso-spacerun:
yes">&nbsp; </span>Then <b style='mso-bidi-font-weight:normal'>Yield</b> will
find the next thread from the <b style='mso-bidi-font-weight:normal'>readyList</b>.<span
style="mso-spacerun: yes">&nbsp; </span>(If there is no other thread, then <b
style='mso-bidi-font-weight:normal'>Yield</b> is effectively a nop.)<span
style="mso-spacerun: yes">&nbsp; </span>Then <b style='mso-bidi-font-weight:
normal'>Yield</b> will make the currently running process READY (i.e., no
longer RUNNING) and it will add the current thread to the tail end of the <b
style='mso-bidi-font-weight:normal'>readyList</b>.<span style="mso-spacerun:
yes">&nbsp; </span>Finally, it will call the <b style='mso-bidi-font-weight:
normal'>Run</b> function to do the thread switch.<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'>The <b
style='mso-bidi-font-weight:normal'>Run</b> method will check for stack
overflow on the current thread.<span style="mso-spacerun: yes">&nbsp; </span>It
will then call <b style='mso-bidi-font-weight:normal'>Switch</b> to do the
actual <b style='mso-bidi-font-weight:normal'>Switch</b>.<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><b style='mso-bidi-font-weight:normal'><span
style='font-family:Times'>Switch</span></b><span style='font-family:Times'> may
be the most fascinating function you ever encounter!<span style="mso-spacerun:
yes">&nbsp; </span>It is located in the assembly code file <b style='mso-bidi-font-weight:
normal'>Switch.s</b>, which you should look at carefully.<span
style="mso-spacerun: yes">&nbsp; </span>Switch does not return to the function
that called it.<span style="mso-spacerun: yes">&nbsp; </span>Instead, it
switches to another thread.<span style="mso-spacerun: yes">&nbsp; </span>Then
it returns.<span style="mso-spacerun: yes">&nbsp; </span>Therefore, the return
happens to another function in another thread!<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'>The
only place <b style='mso-bidi-font-weight:normal'>Switch</b> is called is from
the <b style='mso-bidi-font-weight:normal'>Run</b> function, so <b
style='mso-bidi-font-weight:normal'>Switch</b> returns to some invocation of
the <b style='mso-bidi-font-weight:normal'>Run</b> function in some other
thread.<span style="mso-spacerun: yes">&nbsp; </span>That copy (i.e.,
invocation) of <b style='mso-bidi-font-weight:normal'>Run</b> will then return
to whoever called it.<span style="mso-spacerun: yes">&nbsp; </span>This could
have been some other call to <b style='mso-bidi-font-weight:normal'>Yield</b>,
so we’ll return to another <b style='mso-bidi-font-weight:normal'>Yield</b>
which will return to whoever called it.<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'>And
this is exactly the desired functionality of <b style='mso-bidi-font-weight:
normal'>Yield</b>!<span style="mso-spacerun: yes">&nbsp; </span>A call to <b
style='mso-bidi-font-weight:normal'>Yield</b> should give up the processor for
a while, and eventually return after other threads have had a chance to
execute.<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><b style='mso-bidi-font-weight:normal'><span
style='font-family:Times'>Run</span></b><span style='font-family:Times'> is
also called from <b style='mso-bidi-font-weight:normal'>Sleep</b>, so we might
be returning from a call to <b style='mso-bidi-font-weight:normal'>Sleep</b>
after a thread switch.<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'>How
is everything set up when a thread is first created?<span style="mso-spacerun:
yes">&nbsp; </span>How can we “return to a function” when we have not ever
called it?<span style="mso-spacerun: yes">&nbsp; </span>Take a look at function
<b style='mso-bidi-font-weight:normal'>ThreadStartMain</b> in file <b
style='mso-bidi-font-weight:normal'>Thread.c</b> and look at function <b
style='mso-bidi-font-weight:normal'>ThreadStartUp</b> in file <b
style='mso-bidi-font-weight:normal'>Switch.s</b>.<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'>What
happens when a thread is terminated?<span style="mso-spacerun: yes">&nbsp;
</span>Take a look at <b style='mso-bidi-font-weight:normal'>ThreadFinish</b>
in file <b style='mso-bidi-font-weight:normal'>Thread.c</b>.<span
style="mso-spacerun: yes">&nbsp; </span>Essentially, the thread is put to sleep
with no hope of ever being awakened.<span style="mso-spacerun: yes">&nbsp;
</span>(No wonder they call it “Thread Death!”)<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'>Next,
take a look at what happens when a Timer interrupt occurs while some thread is
executing.<span style="mso-spacerun: yes">&nbsp; </span>This is an interrupt,
so the CPU begins by interrupting the current routine’s execution and pushing
some state onto its (system) stack.<span style="mso-spacerun: yes">&nbsp;
</span>Then it disables interrupts and jumps to the assembly code routine
called <b style='mso-bidi-font-weight:normal'>TimerInterruptHandler</b> in <b
style='mso-bidi-font-weight:normal'>Runtime.s</b>, which just calls the <b
style='mso-bidi-font-weight:normal'>TimerInterruptHandler</b> function in <b
style='mso-bidi-font-weight:normal'>Thread.c</b>.<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'>In <b
style='mso-bidi-font-weight:normal'>TimerInterruptHandler</b>, we call <b
style='mso-bidi-font-weight:normal'>Yield</b>, which then switches to another
thread.<span style="mso-spacerun: yes">&nbsp; </span>Later, we’ll come back
here, when this thread gets another chance to run.<span style="mso-spacerun:
yes">&nbsp; </span>Then, we’ll return to the assembly language routine which
will execute a “reti” instruction.<span style="mso-spacerun: yes">&nbsp;
</span>This will restore the state to exactly what it was before and the
interrupted routine (whatever it was) will get to continue.<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'>Note
that this code maintains a variable called <b style='mso-bidi-font-weight:normal'>currentInterruptStatus</b>.<span
style="mso-spacerun: yes">&nbsp; </span>This is because it is rather difficult
to query the “I” bit of the CPU.<span style="mso-spacerun: yes">&nbsp;
</span>It is easier to just change the variable whenever a change to the
interrupt status changes.<span style="mso-spacerun: yes">&nbsp; </span>We see
this occurring in the <b style='mso-bidi-font-weight:normal'>TimerInterruptHandler
</b>function.<span style="mso-spacerun: yes">&nbsp; </span>Clearly interrupts
will be disabled immediately after the interrupt occurs.<span
style="mso-spacerun: yes">&nbsp; </span>And the <b style='mso-bidi-font-weight:
normal'>Yield</b> function will preserve the interrupt status.<span
style="mso-spacerun: yes">&nbsp; </span>So when we return from <b
style='mso-bidi-font-weight:normal'>Yield</b>, interrupts will once again be
disabled.<span style="mso-spacerun: yes">&nbsp; </span>Before returning to the
interrupted thread, we set the <b style='mso-bidi-font-weight:normal'>currentInterruptStatus</b>
to ENABLED.<span style="mso-spacerun: yes">&nbsp; </span>(They must have been
enabled before the interrupt occurred&#8212;or else it could not have
occurred&#8212;so after we execute the “reti” instruction, the status will
revert to what it was before, namely ENABLED.)<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'>Now
you are ready to start playing with and modifying the code!<span
style="mso-spacerun: yes">&nbsp; </span>Please experiment with the code we have
just discussed, as necessary to understand it.<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<h3>Step 3:<span style="mso-spacerun: yes">&nbsp; </span>Run the
“SimpleThreadExample” Code</h3>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Execute and trace through
the output of <b style='mso-bidi-font-weight:normal'>SimpleThreadExample</b> in
file <b style='mso-bidi-font-weight:normal'>Main.c</b>.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>In <b style='mso-bidi-font-weight:
normal'>TimerInterruptHandler</b> there is a statement<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'><span
style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>printChar ('_')<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>which is commented out.<span
style="mso-spacerun: yes">&nbsp; </span>Try uncommenting it.<span
style="mso-spacerun: yes">&nbsp; </span>Make sure you understand the output.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>In <b style='mso-bidi-font-weight:
normal'>TimerInterruptHandler</b>, there is a call to <b style='mso-bidi-font-weight:
normal'>Yield</b>.<span style="mso-spacerun: yes">&nbsp; </span>Why is this
there?<span style="mso-spacerun: yes">&nbsp; </span>Try commenting this
statement?<span style="mso-spacerun: yes">&nbsp; </span>What happens.<span
style="mso-spacerun: yes">&nbsp; </span>Make sure you understand how <b
style='mso-bidi-font-weight:normal'>Yield</b> works here.<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<h3>Step 4:<span style="mso-spacerun: yes">&nbsp; </span>Run the
“MoreThreadExamples” Code</h3>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Trace through the
output.<span style="mso-spacerun: yes">&nbsp; </span>Try changing this code to
see what happens.<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<h3>Step 5:<span style="mso-spacerun: yes">&nbsp; </span>Implement the “Mutex”
Class</h3>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>In this part, you must
implement the class <b style='mso-bidi-font-weight:normal'>Mutex</b>.<span
style="mso-spacerun: yes">&nbsp; </span>The class specification for <b
style='mso-bidi-font-weight:normal'>Mutex</b> is given to you in <b
style='mso-bidi-font-weight:normal'>Synch.h</b>:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:.25in'><span style='font-family:"Courier New"'><span
style="mso-spacerun: yes">&nbsp; </span><u>class</u> Mutex<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.25in'><span style='font-family:"Courier New"'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span><u>superclass</u> Object<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.25in'><span style='font-family:"Courier New"'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span><u>methods<o:p></o:p></u></span></p>

<p class=MsoNormal style='margin-left:.25in'><span style='font-family:"Courier New"'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Init ()<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.25in'><span style='font-family:"Courier New"'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Lock ()<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.25in'><span style='font-family:"Courier New"'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Unlock ()<o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.25in'><span style='font-family:"Courier New"'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>IsHeldByCurrentThread () <u>returns</u> <u>bool</u><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:.25in'><span style='font-family:"Courier New"'><span
style="mso-spacerun: yes">&nbsp; </span><u>endClass<o:p></o:p></u></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>You will need to provide
code for each of these methods.<span style="mso-spacerun: yes">&nbsp; </span>In
<b style='mso-bidi-font-weight:normal'>Synch.c </b>you’ll see a <b
style='mso-bidi-font-weight:normal'>behavior</b> construct for <b
style='mso-bidi-font-weight:normal'>Mutex</b>.<span style="mso-spacerun:
yes">&nbsp; </span>There are methods for <b style='mso-bidi-font-weight:normal'>Init</b>,
<b style='mso-bidi-font-weight:normal'>Lock</b>, <b style='mso-bidi-font-weight:
normal'>Unlock</b>, and <b style='mso-bidi-font-weight:normal'>IsHeldByCurrentThread</b>,
but these have dummy bodies.<span style="mso-spacerun: yes">&nbsp;
</span>You’ll need to write the code for these four methods.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>You will also need to add a
couple of fields to the <b style='mso-bidi-font-weight:normal'>class</b>
specification of <b style='mso-bidi-font-weight:normal'>Mutex</b> to implement the
desired functionality.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>How can you implement the <b
style='mso-bidi-font-weight:normal'>Mutex</b> class?<span style="mso-spacerun:
yes">&nbsp; </span>Take a close look at the <b style='mso-bidi-font-weight:
normal'>Semaphore</b> class; your implementation of <b style='mso-bidi-font-weight:
normal'>Mutex</b> will be quite similar.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>First consider the <b
style='mso-bidi-font-weight:normal'>IsHeldByCurrentThread</b> method, which may
be invoked by any thread.<span style="mso-spacerun: yes">&nbsp; </span>The code
of this method will need to know which thread is holding a lock on the mutex;
then it can compare that to the <b style='mso-bidi-font-weight:normal'>currentThread</b>
to see if they are the same.<span style="mso-spacerun: yes">&nbsp; </span>So,
you might consider adding a field (perhaps called <b style='mso-bidi-font-weight:
normal'>heldBy</b>) to the <b style='mso-bidi-font-weight:normal'>Mutex</b>
class, which will be a pointer to the thread holding the mutex.<span
style="mso-spacerun: yes">&nbsp; </span>Of course, you’ll need to set it to the
current thread whenever the mutex is locked.<span style="mso-spacerun:
yes">&nbsp; </span>You might use a null value in this field to indicate that no
thread is holding a lock on the mutex.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>When a lock is requested on
the mutex, you’ll need to see if any thread already has a lock on this
mutex.<span style="mso-spacerun: yes">&nbsp; </span>If so, you’ll need to put
the current process to sleep.<span style="mso-spacerun: yes">&nbsp; </span>For
putting a thread to sleep, take a look at the method <b style='mso-bidi-font-weight:
normal'>Semaphore.Down</b>.<span style="mso-spacerun: yes">&nbsp; </span>At any
one time, there may be zero, one, or many threads waiting to acquire a lock on
the mutex; you’ll need to keep a list of these threads so that when an <b
style='mso-bidi-font-weight:normal'>Unlock</b> is executed, you can wake up one
of them.<span style="mso-spacerun: yes">&nbsp; </span>As in the case of <b
style='mso-bidi-font-weight:normal'>Semaphore</b>s, you should use a FIFO
queue, waking up the thread that has been waiting longest.<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>When a mutex lock is
released (in the <b style='mso-bidi-font-weight:normal'>Unlock</b> method),
you’ll need to see if there are any threads waiting to acquire a lock on the
mutex.<span style="mso-spacerun: yes">&nbsp; </span>You can choose one and move
it back onto the <b style='mso-bidi-font-weight:normal'>readyList</b>.<span
style="mso-spacerun: yes">&nbsp; </span>Now the waiting thread will begin
running when it gets a turn.<span style="mso-spacerun: yes">&nbsp; </span>The
code in <b style='mso-bidi-font-weight:normal'>Semaphore.Up</b> does something
similar.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>It is also a good idea to
add an error check in the <b style='mso-bidi-font-weight:normal'>Lock</b>
method to make sure that the current thread asking to lock the mutex doesn’t
already hold a lock on the mutex.<span style="mso-spacerun: yes">&nbsp;
</span>If it does, you can simply invoke <b style='mso-bidi-font-weight:normal'>FatalError</b>.<span
style="mso-spacerun: yes">&nbsp; </span>(This would probably indicate a logic
error in the code using the mutex.<span style="mso-spacerun: yes">&nbsp;
</span>It would lead to a deadlock, with a thread frozen forever, waiting for
itself to release the lock.)<span style="mso-spacerun: yes">&nbsp;
</span>Likewise, you should also add a check in <b style='mso-bidi-font-weight:
normal'>Unlock</b> to make sure the current thread really does hold the lock
and call <b style='mso-bidi-font-weight:normal'>FatalError</b> if not.<span
style="mso-spacerun: yes">&nbsp; </span>You’ll be using your <b
style='mso-bidi-font-weight:normal'>Mutex</b> class later, so these checks will
help your debugging in later projects.<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>The function <b
style='mso-bidi-font-weight:normal'>TestMutex</b> in <b style='mso-bidi-font-weight:
normal'>Main.c</b> is provided to exercise your implementation of <b
style='mso-bidi-font-weight:normal'>Mutex</b>.<span style="mso-spacerun:
yes">&nbsp; </span>It creates 7 threads that compete vigorously for a single
mutex lock.<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<h3>Step 6:<span style="mso-spacerun: yes">&nbsp; </span>Implement the
Producer-Consumer Solution</h3>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Both the Tanenbaum and
Silberschatz, et al. textbooks contain a discussion of the Producer-Consumer
problem, including a solution.<span style="mso-spacerun: yes">&nbsp;
</span>Implement this in KPL using the classes <b style='mso-bidi-font-weight:
normal'>Mutex</b> and <b style='mso-bidi-font-weight:normal'>Semaphore</b>.<span
style="mso-spacerun: yes">&nbsp; </span>Deal with multiple producers and
multiple consumers, all sharing a single bounded buffer.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>The <b style='mso-bidi-font-weight:
normal'>Main</b> package contains some code that will serve as a
framework.<span style="mso-spacerun: yes">&nbsp; </span>The buffer is called <b
style='mso-bidi-font-weight:normal'>buffer</b> and contains up to <b
style='mso-bidi-font-weight:normal'>BUFFER_SIZE</b> (e.g., 5) characters.<span
style="mso-spacerun: yes">&nbsp; </span>There are 5 producer processes, each
modeled by a thread, and 3 consumer processes, each modeled by a thread.<span
style="mso-spacerun: yes">&nbsp; </span>Thus, there are 8 threads in addition
to the main thread that creates the others.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Each producer will loop,
adding 5 characters to the buffer.<span style="mso-spacerun: yes">&nbsp;
</span>The first producer will add five ‘A’ characters, the second producer
will add five ‘B’s, etc.<span style="mso-spacerun: yes">&nbsp; </span>However,
since the execution of these threads will be interleaved, the characters will
be added in a somewhat random order.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<h3><o:p><span style='text-decoration:none'>&nbsp;</span></o:p></h3>

<h3><o:p><span style='text-decoration:none'>&nbsp;</span></o:p></h3>

<h3>Step 7:<span style="mso-spacerun: yes">&nbsp; </span>Implement the Dining
Philosopher’s Solution Using a Monitor</h3>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>A starting framework for
your solution is provided in <b style='mso-bidi-font-weight:normal'>Main.c</b>.<span
style="mso-spacerun: yes">&nbsp; </span>Each philosopher is modeled with a
thread and the code we’ve provided sets up these threads. <span
style="mso-spacerun: yes">&nbsp;</span>The synchronization will be controlled
by a “monitor” called <b style='mso-bidi-font-weight:normal'>ForkMonitor</b>.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>The code for each
thread/philosopher is provided for you.<span style="mso-spacerun: yes">&nbsp;
</span>Look over the <b style='mso-bidi-font-weight:normal'>PhilosophizeAndEat</b>
method; you should not need to change this code.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>The monitor to control
synchronization between the threads is implemented with a class called <b
style='mso-bidi-font-weight:normal'>ForkMonitor</b>.<span style="mso-spacerun:
yes">&nbsp; </span>The following class specification of <b style='mso-bidi-font-weight:
normal'>ForkMonitor</b> is provided:<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'><span
style="mso-spacerun: yes">&nbsp; </span>class ForkMonitor<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span>superclass Object<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span>fields<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>status: array
[5] of int<span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>-- For each philosopher: HUNGRY,<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'><span
style="mso-spacerun: yes">&nbsp;</span><span style="mso-spacerun:
yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span>-- EATING, or THINKING<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp; </span>methods<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Init ()<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>PickupForks (p:
int)<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>PutDownForks
(p: int)<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'><span
style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>PrintAllStatus
()<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:"Courier New"'><span
style="mso-spacerun: yes">&nbsp; </span>endClass<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>You’ll need to provide the
code for the <b style='mso-bidi-font-weight:normal'>Init</b>, <b
style='mso-bidi-font-weight:normal'>PickupForks</b> and <b style='mso-bidi-font-weight:
normal'>PutDownForks</b> methods.<span style="mso-spacerun: yes">&nbsp;
</span>You’ll also need to add additional fields and perhaps even add another
method.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>The code for <b
style='mso-bidi-font-weight:normal'>PrintAllStatus</b> is provided.<span
style="mso-spacerun: yes">&nbsp; </span>You should call this method whenever
you change the status of any philosopher.<span style="mso-spacerun: yes">&nbsp;
</span>This method will print a line of output, so you can see what is
happening.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>How can you proceed?<span
style="mso-spacerun: yes">&nbsp; </span>You’ll need a mutex to protect the
monitor itself.<span style="mso-spacerun: yes">&nbsp; </span>There are two main
methods (<b style='mso-bidi-font-weight:normal'>PickupForks</b> and <b
style='mso-bidi-font-weight:normal'>PutDownForks</b>) which are called by the
philosopher threads.<span style="mso-spacerun: yes">&nbsp; </span>Upon
beginning each of these methods, the first thing is to lock the monitor
mutex.<span style="mso-spacerun: yes">&nbsp; </span>This will ensure that only
one thread at a time is executing within the monitor.<span style="mso-spacerun:
yes">&nbsp; </span>Just before each of these methods returns, it must unlock
the monitor (by unlocking the monitor’s mutex) so that other threads can enter
the monitor code.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>You’ll also need to use the <b
style='mso-bidi-font-weight:normal'>Condition</b> class, which is provided in
the <b style='mso-bidi-font-weight:normal'>Synch</b> package.<span
style="mso-spacerun: yes">&nbsp; </span>(The <b style='mso-bidi-font-weight:
normal'>Condition</b> class uses the class <b style='mso-bidi-font-weight:normal'>Mutex</b>,
so it is assumed that you’ve finished and tested the <b style='mso-bidi-font-weight:
normal'>Mutex</b> class.)<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>The BLITZ emulator has a
number of parameters and one of these is how often a timer interrupt
occurs.<span style="mso-spacerun: yes">&nbsp; </span>The default value is every
5000 instructions.<span style="mso-spacerun: yes">&nbsp; </span>You might try
changing this parameter to see how it affects your programs behavior.<span
style="mso-spacerun: yes">&nbsp; </span>To change the simulation parameters,
type the <b style='mso-bidi-font-weight:normal'>sim</b> command into the
emulator.<span style="mso-spacerun: yes">&nbsp; </span>This command will give
you the option to create a file called<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>.blitzrc<o:p></o:p></span></b></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>After creating this file,
you can edit it by hand.<span style="mso-spacerun: yes">&nbsp; </span>The next
time you run the emulator, it will use this new value.<span
style="mso-spacerun: yes">&nbsp; </span>Also note that too small a
value&#8212;like 1000&#8212;will cause the program to hang.<span
style="mso-spacerun: yes">&nbsp; </span>What do you suppose causes this effect?<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><u><span style='font-family:Times'>QUESTION:</span></u><span
style='font-family:Times'><span style="mso-spacerun: yes">&nbsp; </span>Both
textbooks discuss the semantics of signaling a condition variable.<span
style="mso-spacerun: yes">&nbsp; </span>They mention “Hoare semantics.”<span
style="mso-spacerun: yes">&nbsp; </span>The comments in the code in <b
style='mso-bidi-font-weight:normal'>Synch.c</b> say that this version
implements “Mesa-style” semantics.<span style="mso-spacerun: yes">&nbsp;
</span>Is this the same or different from Hoare semantics?<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<h3><o:p><span style='text-decoration:none'>&nbsp;</span></o:p></h3>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<h3>An Example of Correct Output</h3>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>The following files contain
an example of what correct output should look like:<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>DesiredOutput1.pdf</span></b><span
style='font-family:Times'><o:p></o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>DesiredOutput2.pdf</span></b><span
style='font-family:Times'><o:p></o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>DesiredOutput3.pdf</span></b><span
style='font-family:Times'><o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<h3><o:p><span style='text-decoration:none'>&nbsp;</span></o:p></h3>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<h3>What to Hand In</h3>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Complete all the above
steps.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Please submit hardcopy of
the following files:<o:p></o:p></span></p>

<p class=MsoFooter style='tab-stops:.5in'><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>Synch.h<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>Synch.c<o:p></o:p></span></b></p>

<p class=MsoNormal><b style='mso-bidi-font-weight:normal'><span
style='font-family:"Courier New"'><span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp; </span>Main.c<o:p></o:p></span></b></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Also include hardcopy
showing the output for steps 5, 6, and 7.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>Please print both your code
and the output using a </span><span style='font-size:14.0pt;mso-bidi-font-size:
10.0pt;font-family:Courier'>fixed-width font like this,</span><span
style='font-family:Times'> in this and all future assignments.<span
style="mso-spacerun: yes">&nbsp; </span>Much of the output is designed to look
nice when printed with a fixed-width font, but is more difficult to read in a
standard variable-width font.<b style='mso-bidi-font-weight:normal'><o:p></o:p></b></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>In LARGE BLOCK LETTERS,
write your full name on the first page.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>PLEASE STAPLE ALL PAGES!<o:p></o:p></span></p>

<h3><o:p><span style='text-decoration:none'>&nbsp;</span></o:p></h3>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<h3>Basis for Grading</h3>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>In this course, the code you
submit will be graded on both <b style='mso-bidi-font-weight:normal'>correctness</b>
and <b style='mso-bidi-font-weight:normal'>style</b>.<span style="mso-spacerun:
yes">&nbsp; </span>Correctness means that the code must work right and not
contain bugs.<span style="mso-spacerun: yes">&nbsp; </span>Style means that the
code must be neat, well commented, well organized, and easy to read.<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal><span style='font-family:Times'>In style, your code should
match the code we are distributing to you.<span style="mso-spacerun:
yes">&nbsp; </span>The indentation should be the same and the degree of
commenting should be the same.<o:p></o:p></span></p>

</div>

</body>

</html>
